# 빌드 에러 디버깅

## 빌드 에러

    error CS0234: The type or namespace name 'EditorApplication' does not exist in the namespace 'UnityEditor' (are you missing an assembly reference?)

UnityEditor 네임스페이스와 EditorApplication 클래스는 빌드 파일에서 컴파일 할 수 없는 코드

&rarr; 에디터에서 실행할 때와 빌드 파일로 실행할 때 다른 코드로 컴파일하도록 조건을 나누는 방법으로 해결 가능

&rarr; if문은 컴파일 완료 후 프로그램이 실행되면서 작동하기 때문에 부적합

&rarr; 컴파일하기 직전에 소스코드를 처리하는 프로그램인 전처리기 필요

Server 스크립트|
|:---:|

```C#
using Photon.Pun;
using Photon.Realtime;
using UnityEngine;
using UnityEngine.UI;

// 포톤 관련 콜백 함수를 상속받기 위함
public class Server : MonoBehaviourPunCallbacks
{
    // 시작 버튼
    public Button startBin;
    // 종료 버튼
    public Button exitBtn;
    // 로비 화면
    public GameObject lobby;
    // 연결 현황 텍스트
    public Text connectInfoTxt;
    // 승리 횟수 텍스트
    public Text winCountTxt;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        // 시작 버튼의 OnClick() 함수에 OnClickStart() 함수 연결
        startBin.onClick.AddListener(OnClickStart);

        // 종료 버튼의 OnClick() 함수에 OnClickExit() 함수 연결
        exitBtn.onClick.AddListener(OnClickExit);

        // 시작 버튼 비활성화 상태로 시작
        startBin.interactable = false;

        // 서버 접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "서버 접속 중...";

        // 승리 횟수 출력
        winCountTxt.text = "승리 횟수 : " + DataManager.instance.WinCount.ToString();
    }

    // 시작 버튼 누르면 호출
    void OnClickStart()
    {
        // 클릭 효과음 재생
        AudioManager.instance.Audio_Click(0);

        // 로비 접속 시도
        PhotonNetwork.JoinLobby();
        connectInfoTxt.text = "로비 접속 중...";
    }

    // 종료 버튼을 누르면 호출
    void OnClickExit()
    {
        // 버큰 클릭 효과음 재생
        AudioManager.instance.Audio_Click(0);

        // 유니티 에디터에서 플레이 버튼을 누르는 것과 동일한 기능
        // UnityEditor.EditorApplication.isPlaying = false;
        // 게임 종료
        (*)// 유니티 에디터일 때
(*)#if (UNITY_EDITOR)
        (*){
            (*)UnityEditor.EditorApplication.isPlaying = false;
        (*)}
        (*)// 유디티 에디터가 아닐 때
        (*)#else
        (*){
            (*)Application.Quit();
        (*)}
        (*)#endif
    (*)}

    // 서버 접속에 성공하면 호출
    public override void OnConnectedToMaster()
    {
        // 시작 버튼 활성화
        startBin.interactable = true;
        connectInfoTxt.text = "서버 접속 성공!";
    }

    // 로비 접속에 성공하면 호출
    public override void OnJoinedLobby()
    {
        // 로비 화면으로 전환
        gameObject.SetActive(false);
        lobby.SetActive(true);
        connectInfoTxt.text = "로비 접속 성공!";
    }

    // 접속에 실패하면 호출
    public override void OnDisconnected(DisconnectCause cause)
    {
        // 서버 재접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "접속 실패, 서버 재접속 중...";
    }
}
```

__전처리기 코드__
- 앞에 해시 기호(#)가 붙어 있는 코드
  - `#if`, `#else`, `#endif`, ...
- if문을 끝낼 때에는 꼭 `#endif` 작성해야 함

전처리기|설명|
|:---:|:---:|
`#define`|심볼 정의
`#undef`|심볼 정의 해제
`#if`|조건에 만족한다면 컴파일
`#elif`|앞의 조건에 만족하지 않고, 현재 조건에 만족한다면 컴파일
`#else`|조건에 만족하지 않는다면 컴파일
`#endif`|`#if` 조건문 종료
`#region`|확장/축소가 가능한 코드 블록으로 지정
`#endregion`|`#region` 조건문 종료
