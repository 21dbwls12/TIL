# 사운드

배경음악, 효과음(총, 버튼, 걷기)

Window &rarr; Package Manager &rarr; My Assets &rarr; 추가한 에셋 다운로드 및 임포트 &rarr; 필요한 음악 파일 제외 삭제 &rarr; 새 폴더(7_AudioClips)에 정리

- 사용할 수 있는 사운드 파일 아이콘: <img width="20" height="18" alt="스크린샷 2025-11-29 오후 9 02 11" src="https://github.com/user-attachments/assets/994a44a2-9c63-4770-99c1-79c1a1b0a54e" />

<br>

## 사운드 인스펙터창

<img width="501" height="810" alt="스크린샷 2025-11-29 오후 9 23 12" src="https://github.com/user-attachments/assets/effc91cf-6a4a-4a09-bfb7-6c90a7e1440a" />

<br>

## 사운드 삽입

게임 안에서 재생하기 위해 필요한 컴포넌트

- Audio Source 컴포넌트
  - 오디오 클립 재생
  - 기본적으로 들어 있지 않아서 추가해야 함
- Audio Listener 컴포넌트
  - 게임 안의 소리 수신
  - 기본적으로 Main Camera 오브젝트에 들어 있음

StartScene &rarr; Create Empty(AudioManager) &rarr; Add Component &rarr; Audio Source|<img width="760" height="576" alt="스크린샷 2025-11-29 오후 9 34 14" src="https://github.com/user-attachments/assets/45cc6dd3-cfa3-454b-8fa1-6342e6445a39" />
|:---:|:---:|
Main Camera 내 Audio Listener|<img width="758" height="676" alt="스크린샷 2025-11-29 오후 9 38 09" src="https://github.com/user-attachments/assets/91473619-41bd-41a4-abac-5772159d427c" />

<br>

### 배경 음악 추가

StartScene에 추가한 AudioManager에 배경 음악 파일 추가|<img width="757" height="790" alt="스크린샷 2025-11-29 오후 9 45 16" src="https://github.com/user-attachments/assets/9cc3c6ea-8022-4733-958e-c77bd621bc67" />

- Play On Awake
  - 게임이 시작되자마자 배경 음악이 실행되는데 원하지 않을 경우 체크 해제
- Loop
  - 반복 재생
- Volume
  - 음량 조절

<br>

#### 배경 음악 유지


StartScene에서 PlayScene 전환 후, 배경 음악은 재생이 안됨 

&rarr; StartScene의 AudioManager를 복사하여 PlayScene에 배치하면 음악 재생되긴 하지만 이어서 재생되는 것이 아니라 끊긴 후 다시 시작 하므로 다른 방법 필요

&rarr; 새 스크립트 생성 후 AudioManager에 컴포넌트로 추가


AudioManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class AudioManager : MonoBehaviour
{
    // Start()보다 먼저 호출되는 함수
    // 순서가 중요한 기능이 있을 때는 Awake()사용
    private void Awake()
    {
        // 인수로 지정한 오브젝트는 씬이 전환되어도 유지 (ex. 배경음악)
        // 자식 오브젝트만 단독으로 유지할 수 없고, 부모 오브젝트까지 유지해야 함
        // 씬 전환 시 삭제되지 않도록 유지
        DontDestroyOnLoad(gameObject);
    }
}
```

StartScene의 DontDestroyOnLoad 하위로 자동으로 들어감|씬이 전환되어도 유지(PlayScene)
|:---:|:---:|
<img width="220" height="155" alt="스크린샷 2025-11-30 오전 12 07 10" src="https://github.com/user-attachments/assets/3f9f1be6-8cc3-400f-b5c8-5ead453214e5" />|<img width="220" height="205" alt="스크린샷 2025-11-30 오전 12 07 44" src="https://github.com/user-attachments/assets/01e3e839-e739-4459-8714-8141d264a5fe" />

<br>

#### 중복 방지

이전 씬으로 전환 시, 동일한 오브젝트가 생성되어 소리가 겹쳐서 들리는 것 방지

오브젝트 중복 생성|
|:---:|
<img width="219" height="172" alt="스크린샷 2025-11-30 오전 1 33 23" src="https://github.com/user-attachments/assets/b87f7e45-ef6e-4aaa-bafd-db6f3d10b649" />|

<br>

##### 게임 중단 기능 구현

ESC 키 두번 누르면 게임 중단

- ESC 키를 누르는 순간 한 번 더 누르면 게임 종료 예정 문구 띄우기

PlayScene &rarr; Canvas &rarr; UI &rarr; Legacy &rarr; Text(WarningTxt) &rarr; 경고 문구 작성

PlaySceneManager 스크립트|
|:---:|

```C#
using System.Collections;
using Photon.Pun;
using UnityEngine;

// 포톤 관련 콜백 함수를 상속받기 위함
public class PlaySceneManager : MonoBehaviourPunCallbacks
{
    // 플레이어 스폰 위치
    public Transform[] playerSpawnPoints;
    (*)// ESC 경고 문구
    (*)public GameObject warningTxt;

    // 게임이 끝났는지
    bool isEnding;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        // 현재 방에 참여한 플레이어 인원
        int playerCount = PhotonNetwork.CurrentRoom.PlayerCount;

        // 플레이어 인원에 따라 다른 스폰 위치에 플레잉어 생성(1명이면 0번, 2명이면 1번)
        // 프리팹을 복제하여 생성함과 동시에 네트워크에서 동기화
        // 항상 Resources 폴더를 경로로 사용하므로 Player 오브젝트를 프리팹화할 때 Prefabs 폴더가 아닌 Resources 폴더에 넣었던 것
        // 복제할 오브젝트에 PhotonView 컴포넌트가 부여되어 있어야 함(동기화 담당 및 고유 ID 배정)
        PhotonNetwork.Instantiate("Player", playerSpawnPoints[playerCount - 1].position, Quaternion.identity);
    }

    (*)private void Update()
    (*){
        (*)// ESC키를 입력했다면
        (*)if (Input.GetKeyDown(KeyCode.Escape))
        (*){
            (*)StartCoroutine(AfterEsc());
        (*)}
    (*)}

    (*)// ESC키 입력 이후로 실행될 기능들
    (*)public IEnumerator AfterEsc()
    (*){
        (*)// 경고 문구 활성화
        (*)warningTxt.SetActive(true);

        (*)float time = 0;

        (*)// ESC키를 눌렀어도 중단하고 싶지 않을 경우를 위해 time 추가
        (*)// 방에서 나가거나 3초가 지나기 전까지 반복
        (*)while (PhotonNetwork.InRoom && time < 3)
        (*){

            (*)// AfterEsc() 함수 안에서도 ESC 키가 입력되었다고 판단하기 때문에 연속적으로 인식하지 못하도록 time != 0 조건 추가
            (*)// ESC키를 한 번 더 입력했다면
            (*)if (time != 0 && Input.GetKeyDown(KeyCode.Escape))
            (*){
                (*)// 방에서 퇴장 시도
                (*)PhotonNetwork.LeaveRoom();

                (*)// 반복문을 끝내서 함수 탈출
                (*)break;
            (*)}

            (*)// 시간 재기
            (*)time += Time.deltaTime;

            (*)// 업데이트 함수가 호출될 때까지 쉬기
            (*)yield return null;
        (*)}

        (*)// 경고 문구 비활성화
        (*)warningTxt.SetActive(false);
    (*)}

    // 코루틴 함수 + while문 또는 for문 + yield return null
    // Update() 함수 사용하지 않아도 매 프레임마다 코드가 실행되도록 반복 가능, 원할 때 종료 가능 
    // 스킬의 쿨타임과 같은 기능을 구현할 때 주로 사용
    // 엔딩 이후로 실행될 기능들
    public IEnumerator AfterEnding()
    {
        isEnding = true;

        // 방에 접속되어 있을 때 PhotonNetwork.InRoom 변수는 true로 설정되어 있음
        // 그래서 이 조건을 달아서 반복문 실행
        // 방에서 나가기 전까지 반복
        while (PhotonNetwork.InRoom)
        {
            // 아무 키나 입력되었다면
            if (Input.anyKeyDown)
            {
                // 방에서 퇴장 시도
                PhotonNetwork.LeaveRoom();

                // 반복문을 끝내서 함수 탈출
                break;
            }
        }

        // 다음 프레임까지 쉬기
        yield return null;
    }

    // 방 퇴장에 성공하면 호출
    public override void OnLeftRoom()
    {
        // 1. StartScene 라는 이름의 씬 불러오기 (씬 전환)
        PhotonNetwork.LoadLevel("1_StartScene");

        // 마우스 커서 보이게
        Cursor.visible = true;

        // 마우스 커서가 움직일 수 있도록 잠금 해제
        Cursor.lockState = CursorLockMode.None;
    }

    // 방에 새로운 플레이어가 입장하면 호출
    public override void OnPlayerEnteredRoom(Photon.Realtime.Player newPlayer)
    {
        // 방 인원 수가 최대 인원 수와 같아지면
        if (PhotonNetwork.CurrentRoom.PlayerCount == PhotonNetwork.CurrentRoom.MaxPlayers)
        {
            // 비공개방으로 전환
            PhotonNetwork.CurrentRoom.IsOpen = false;
            // 목록에서 숨기기
            PhotonNetwork.CurrentRoom.IsVisible = false;
        }
    }

    // 방에서 플레이어가 퇴장하면 호출
    public override void OnPlayerLeftRoom(Photon.Realtime.Player otherPlayer)
    {
        // 승패가 난 상태에서는 실행 금지
        if (isEnding) return;

        // 모든 PhotonView 컴포넌트를 가져와서 반복
        foreach (var player in FindObjectsOfType<PhotonView>())
        {
            // 퇴장한 플레이어의 ActorNumber와 다른 ActorNumber를 가진 플레이어 찾기
            if (player.Owner.ActorNumber != otherPlayer.ActorNumber)
            {
                // 살아남은 플레이어에게 승리시 엔딩 기능 실행
                StartCoroutine(player.GetComponent<PlayerHP>().Ending("승리"));
            }
        }
    }
}
```

WarningTxt 비활성화 &rarr; PlaySceneManager 내 Play Scene Manager 컴포넌트의 변수 Warning Txt 값에 WarningTxt 오브젝트 드래그

WarningTxt 오브젝트|<img width="749" height="490" alt="스크린샷 2025-11-30 오전 1 39 52" src="https://github.com/user-attachments/assets/eee8500a-3bae-4c66-bb59-a663fd0c5b52" />
|:---:|:---:|
PlaySceneManager 오브젝트|<img width="749" height="345" alt="스크린샷 2025-11-30 오전 1 40 39" src="https://github.com/user-attachments/assets/db048ab0-dde4-40e8-92ab-daea4db97d8b" />

<br>

##### 씬 전환 중복 방지 코드 작성

__싱글톤(Singleton)__ 패턴 사용

- 특정 오브젝트 또는 클래스가 게임 내에 단 하나마 존재해야 함
- 사운드. 게임 매니저, UI 매니저 등 게임의 주요 시스템을 관리하는 총괄 오브젝트

AudioManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class AudioManager : MonoBehaviour
{
    (*)// static을 사용하면 GetComponent<T> 함수를 사용하지 않아도 변수나 함수 사용 가능
    (*)// 누구나 접근할 수 있는 AudioManager의 인스턴스
    (*)public static AudioManager instance;

    // Start()보다 먼저 호출되는 함수
    // 순서가 중요한 기능이 있을 때는 Awake()사용
    private void Awake()
    {
        (*)// 인스턴스가 비어있다면
        (*)// = 한 번도 채워진 적이 없으니 처음 실행한다는 뜻
        (*)if (instance == null)
        (*){
            (*)// 자기 자신 할당
            (*)instance = this;

            // 인수로 지정한 오브젝트는 씬이 전환되어도 유지 (ex. 배경음악)
            // 자식 오브젝트만 단독으로 유지할 수 없고, 부모 오브젝트까지 유지해야 함
            // 씬 전환 시 삭제되지 않도록 유지
            DontDestroyOnLoad(gameObject);
        (*)}

        (*)// 인스턴스가 채워져있지만, 자기 자신과 다르다면
        (*)// = 새로 생성된 오브젝트의 클래스
        (*)else if (instance != this)
        (*){
            (*)// 자기 자신의 오브젝트 삭제
            (*)Destroy(gameObject);
        (*)}
    }
}
```

__인스턴스(Instance)__

- 클래스의 복사본
- this &rarr; 해당 클래스

게임 진행 도중 퇴장하고 로비로 돌아가도 배경 음악이 끊기지 않고 계속 실행됨|
|:---:|
<img width="252" height="69" alt="스크린샷 2025-11-30 오후 3 21 14" src="https://github.com/user-attachments/assets/f62c1446-c789-4123-93ee-9ee761b14d9b" />|

<br>

### 효과음

#### 버튼 효과음

배경 음악과 동시에 재생
- 2개의 음악을 재생하려면 Audio Source 컴포넌트 하나 더 필요
- 시작하자마자 재생되는 것이 아닌 원하는 때에 재생되어야 하므로 Play On Awake 체크 해제

AudioManager 오브젝트에 Audio Source 컴포넌트 추가 및 효과음 설정|
|:---:|
<img width="747" height="807" alt="스크린샷 2025-11-30 오후 3 27 36" src="https://github.com/user-attachments/assets/651f493c-7625-451e-9428-fbdc38259dac" />|

AudioManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class AudioManager : MonoBehaviour
{
    (*)// 클릭 관련 오디오소스 컴포넌트
    (*)AudioSource audio_Click;

    // static을 사용하면 GetComponent<T> 함수를 사용하지 않아도 변수나 함수 사용 가능
    // 누구나 접근할 수 있는 AudioManager의 인스턴스
    public static AudioManager instance;

    // Start()보다 먼저 호출되는 함수
    // 순서가 중요한 기능이 있을 때는 Awake()사용
    private void Awake()
    {
        // 인스턴스가 비어있다면
        // = 한 번도 채워진 적이 없으니 처음 실행한다는 뜻
        if (instance == null)
        {
            // 자기 자신 할당
            instance = this;

            // 인수로 지정한 오브젝트는 씬이 전환되어도 유지 (ex. 배경음악)
            // 자식 오브젝트만 단독으로 유지할 수 없고, 부모 오브젝트까지 유지해야 함
            // 씬 전환 시 삭제되지 않도록 유지
            DontDestroyOnLoad(gameObject);
        }

        // 인스턴스가 채워져있지만, 자기 자신과 다르다면
        // = 새로 생성된 오브젝트의 클래스
        else if (instance != this)
        {
            // 자기 자신의 오브젝트 삭제
            Destroy(gameObject);
        }

        (*)// 베열로 반환
        (*)// 0번: 배경음악, 1번: 클릭 효과음
        (*)audio_Click = GetComponents<AudioSource>()[1];
    }

    (*)// 클릭 효과음 재생 함수
    (*)public void Audio_Click()
    (*){
        (*)audio_Click.Play();
    (*)}
}
```

Server 스크립트|
|:---:|

```C#
using Photon.Pun;
using Photon.Realtime;
using UnityEngine;
using UnityEngine.UI;

// 포톤 관련 콜백 함수를 상속받기 위함
public class Server : MonoBehaviourPunCallbacks
{
    // 시작 버튼
    public Button startBin;
    // 로비 화면
    public GameObject lobby;
    // 연결 현황 텍스트
    public Text connectInfoTxt;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        // 시작 버튼의 OnClick() 함수에 OnClickStart() 함수 연결
        startBin.onClick.AddListener(OnClickStart);

        // 시작 버튼 비활성화 상태로 시작
        startBin.interactable = false;

        // 서버 접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "서버 접속 중...";
    }

    // 시작 버튼 누르면 호출
    void OnClickStart()
    {
        (*)// 클릭 효과음 재생
        (*)AudioManager.instance.Audio_Click();

        // 로비 접속 시도
        PhotonNetwork.JoinLobby();
        connectInfoTxt.text = "로비 접속 중...";
    }

    // 서버 접속에 성공하면 호출
    public override void OnConnectedToMaster()
    {
        // 시작 버튼 활성화
        startBin.interactable = true;
        connectInfoTxt.text = "서버 접속 성공!";
    }

    // 로비 접속에 성공하면 호출
    public override void OnJoinedLobby()
    {
        // 로비 화면으로 전환
        gameObject.SetActive(false);
        lobby.SetActive(true);
        connectInfoTxt.text = "로비 접속 성공!";
    }

    // 접속에 실패하면 호출
    public override void OnDisconnected(DisconnectCause cause)
    {
        // 서버 재접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "접속 실패, 서버 재접속 중...";
    }
}
```

Lobby 스크립트|
|:---:|

```C#
...
// 생성 버튼 누르면 호출
void OnClickCreate()
{
    (*)// 클릭 효과음 재생
    (*)AudioManager.instance.Audio_Click();

    // 방 이름 입력란이 비어있다면 함수 탈출하여 아래 코드 실행 불가
    if (roomNameInput.text == "") return;

    // 중복 클릭을 방지하기 위해 버튼 비활성화
    ButtonOnOff(false);

    // 새로운 방 옵션 생성
    RoomOptions roomOptions = new RoomOptions();

    // 최대 인원 수 2명으로 설정
    roomOptions.MaxPlayers = 2;

    // 사용자가 입력한 방 이름과 방 옵션으로 방 생성 시도
    PhotonNetwork.CreateRoom(roomNameInput.text, roomOptions);
    // 방 생성 진행 현황 사용자에게 전달
    connectInfoTxt.text = "방 생성 중...";
}

// 참가 버튼 누르면 호출
void OnClickJoin(String roomName)
{
    (*)// 클릭 효과음 재생
    (*)AudioManager.instance.Audio_Click();
    
    // 중복 클릭을 방지하기 위해 버튼 비활성화
    ButtonOnOff(false);

    // 버튼에 적혀있던 이름의 방으로 접속 시도
    PhotonNetwork.JoinRoom(roomName);
}
...
```

<br>

#### 슈팅 효과음

슈팅 효과음은 버튼 클릭 효과음과 동시에 재생하지 않기 때문에 버튼 클릭 효과음이 들어있는 Audio Source 컴포넌트 공유 가능

AudioManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class AudioManager : MonoBehaviour
{
    (*)// 오디오 클립 배열
    (*)public AudioClip[] clips;

    // 클릭 관련 오디오소스 컴포넌트
    AudioSource audio_Click;

    // static을 사용하면 GetComponent<T> 함수를 사용하지 않아도 변수나 함수 사용 가능
    // 누구나 접근할 수 있는 AudioManager의 인스턴스
    public static AudioManager instance;

    // Start()보다 먼저 호출되는 함수
    // 순서가 중요한 기능이 있을 때는 Awake()사용
    private void Awake()
    {
        // 인스턴스가 비어있다면
        // = 한 번도 채워진 적이 없으니 처음 실행한다는 뜻
        if (instance == null)
        {
            // 자기 자신 할당
            instance = this;

            // 인수로 지정한 오브젝트는 씬이 전환되어도 유지 (ex. 배경음악)
            // 자식 오브젝트만 단독으로 유지할 수 없고, 부모 오브젝트까지 유지해야 함
            // 씬 전환 시 삭제되지 않도록 유지
            DontDestroyOnLoad(gameObject);
        }

        // 인스턴스가 채워져있지만, 자기 자신과 다르다면
        // = 새로 생성된 오브젝트의 클래스
        else if (instance != this)
        {
            // 자기 자신의 오브젝트 삭제
            Destroy(gameObject);
        }

        // 베열로 반환
        // 0번: 배경음악, 1번: 클릭 효과음
        audio_Click = GetComponents<AudioSource>()[1];
    }

    // 클릭 효과음 재생 함수
    public void Audio_Click(int clipNumber)
    {
        (*)// 상황에 맞게 오디오 클립 교체 후 재생
        (*)audio_Click.clip = clips[clipNumber];
        audio_Click.Play();
    }
}
```

Server 스크립트|
|:---:|

```C#
...

// 시작 버튼 누르면 호출
void OnClickStart()
{
    // 클릭 효과음 재생
    (*)AudioManager.instance.Audio_Click(0);

    ...
    }

...
```

Lobby 스크립트|
|:---:|

```C#
...

// 생성 버튼 누르면 호출
void OnClickCreate()
{
    // 클릭 효과음 재생
    (*)AudioManager.instance.Audio_Click(0);

    ...
}

// 참가 버튼 누르면 호출
void OnClickJoin(String roomName)
{
    // 클릭 효과음 재생
    (*)AudioManager.instance.Audio_Click(0);

    ...
}

...
```

AudioManager 오브젝트 내 Audio Manager 컴포넌트의 Clips 변수에 버튼 클릭 효과음과 슈팅 효과음을 차례대로 추가|
|:---:|
<img width="750" height="308" alt="스크린샷 2025-11-30 오후 6 03 33" src="https://github.com/user-attachments/assets/19c393dc-5205-4b14-bcaa-2c7be45d68dd" />|

PlayerFire 스크립트|
|:---:|

```C#
...

void Update()
{
    // 마우스 좌클릭을 누르는 순간, 내 캐릭터일 때만
    if (Input.GetMouseButtonDown(0) && pv.IsMine)
    {
        (*)// 슈팅 효과음 재생
        (*)AudioManager.instance.Audio_Click(1);
        ...
    }
}

...
```

버튼 클릭 시([0])|공격 시([1])
|:---:|:---:|
<img width="473" height="243" alt="스크린샷 2025-11-30 오후 6 47 39" src="https://github.com/user-attachments/assets/b9b8d130-011a-4e11-b8bf-8aeb5c6d3693" />|<img width="475" height="244" alt="스크린샷 2025-11-30 오후 6 48 53" src="https://github.com/user-attachments/assets/eb0c6b8d-5917-4b16-8e75-afc58947cb5c" />

<br>

#### 이동 효과음

걸어다닐 때 재생할 효과음 추가
- 슈팅 효과음과 같이 재생될 수 있기 때문에 같은 Audio Source 컴포넌트 공유 불가
  - 새로운 Audio Source 컴포넌트 추가
  - Play On Awake 체크 해제
  
새로운 Audio Source 컴포넌트 추가 및 이동 효과음 파일을 해당 오디오 값으로 지정|
|:---:|
<img width="760" height="451" alt="스크린샷 2025-11-30 오후 6 55 30" src="https://github.com/user-attachments/assets/5b35bde4-7f55-4f5a-b2f8-407f400d429c" />|

AudioManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class AudioManager : MonoBehaviour
{
    // 오디오 클립 배열
    public AudioClip[] clips;

    // 클릭 관련 오디오소스 컴포넌트
    AudioSource audio_Click;
    (*)// 이동 효과음 오디오소스 컴포넌트
    (*)AudioSource audio_Walk;

    // static을 사용하면 GetComponent<T> 함수를 사용하지 않아도 변수나 함수 사용 가능
    // 누구나 접근할 수 있는 AudioManager의 인스턴스
    public static AudioManager instance;

    // Start()보다 먼저 호출되는 함수
    // 순서가 중요한 기능이 있을 때는 Awake()사용
    private void Awake()
    {
        // 인스턴스가 비어있다면
        // = 한 번도 채워진 적이 없으니 처음 실행한다는 뜻
        if (instance == null)
        {
            // 자기 자신 할당
            instance = this;

            // 인수로 지정한 오브젝트는 씬이 전환되어도 유지 (ex. 배경음악)
            // 자식 오브젝트만 단독으로 유지할 수 없고, 부모 오브젝트까지 유지해야 함
            // 씬 전환 시 삭제되지 않도록 유지
            DontDestroyOnLoad(gameObject);
        }

        // 인스턴스가 채워져있지만, 자기 자신과 다르다면
        // = 새로 생성된 오브젝트의 클래스
        else if (instance != this)
        {
            // 자기 자신의 오브젝트 삭제
            Destroy(gameObject);
        }

        // 베열로 반환
        (*)// 0번: 배경음악, 1번: 클릭 효과음, 2번: 이동 효과음
        audio_Click = GetComponents<AudioSource>()[1];
        (*)audio_Walk = GetComponents<AudioSource>()[2];
    }

    // 클릭 효과음 재생 함수
    public void Audio_Click(int clipNumber)
    {
        // 상황에 맞게 오디오 클립 교체 후 재생
        audio_Click.clip = clips[clipNumber];
        audio_Click.Play();
    }

    (*)// 버튼 클릭 효과음과 달리 캐릭터가 이동하는 중에 계속 반복해서 실행하다가 멈추면 중단되어야 함
    (*)// 이동 효과음 재생 함수
    (*)public void Audio_Walk(bool isWalking)
    (*){
        (*)// 걷는 중이고, 재생 중이 아닐 때만 재생
        (*)if (isWalking && !audio_Walk.isPlaying)
        (*){
            (*)audio_Walk.Play();
        (*)}

        (*)// 걷는 중이 아니면 재생 중지
        (*)else if (!isWalking)
        (*){
            (*)audio_Walk.Stop();
        (*)}
    (*)}
}
```

Player 스크립트|
|:---:|

```C#
...

// Update is called once per frame
void Update()
{
    ...

    // 이동하는 속도를 velocity 변수에 할당
    // magnitude == dir에 있는 벡터의 크기와 방향 중 벡터의 크기
    anim.SetFloat("velocity", dir.magnitude);

    (*)// 이동하고 있고, 점프하지 않을 때 이동 효과음 재생
    (*)if (dir.magnitude > 0 && !anim.GetBool("isJump"))
    (*){
        (*)AudioManager.instance.Audio_Walk(true);
    (*)}
    (*)// 이동을 멈추거나 점프하면 이동 효과음 재생 중지
    (*)else AudioManager.instance.Audio_Walk(false);

    // Space 키를 누른 순간, 점프한 횟수가 2회 미만이라면
    if (Input.GetKeyDown(KeyCode.Space) && jumpCount < 2)
    {
    ...
}

...
```

이동 중에는 계속 걷는 소리가 들리고 점프하거나 멈추면 소리가 멈춤
