# 물리적용, 충돌 판정

## 중력

Rigidbody 2D 컴포넌트 추가

<img width="483" height="306" alt="스크린샷 2025-12-31 오후 5 26 11" src="https://github.com/user-attachments/assets/712fa7e6-d6ad-42f7-a4f3-1a6fea71ea62" />

<br>

## 충돌 판정

Circle Collider 2D 컴포넌트 추가

<img width="483" height="203" alt="스크린샷 2025-12-31 오후 5 26 36" src="https://github.com/user-attachments/assets/8c5aa481-c98e-4c5c-aa6b-e458d7f0eee7" />

<br>

# 프리팹

- 오브젝트를 같은 조건으로 복제할 수 있는 기준(원본) 오브젝트
  - 원본을 수정하면 복제본 모두 영향 받음
  - 복제본을 수정해도 원본에는 영향가지 않음
- 파란색 정육면체
  <img width="96" height="24" alt="스크린샷 2025-12-31 오후 5 33 17" src="https://github.com/user-attachments/assets/d1d91d06-26bf-4144-b29b-439f6066f1a4" />

<br>

# 포탄 발사

프리팹으로 만든 포탄이 게임이 실행 후에 생성되도록 함
- 스페이스바를 누를 때

PlayerController|
|:---:|

```C#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class PlayerController : MonoBehaviour
{
    // 플레이어의 이동속도
    public float speed = 8f;
    // 플레이어의 이동 가능 범위
    public float moveableRange = 5.5f;
    (*)// 포탄이 발사되는 힘
    (*)public float power = 1000f;
    (*)// 포탄 오브젝트(프리팹)
    (*)public GameObject cannonBall;
    (*)// 포탄의 발사 시작 위치
    (*)public Transform spawnPoint;

    // Update is called once per frame
    void Update()
    {
        // 플레이어 이동 설정
        // Horizontal -> 좌우 방향키 or A, D키
        // 오른쪽 == 1, 왼쪽 == -1 반환
        // deltaTime  -> 기기애 상관없이 1초 기준 
        transform.Translate(Input.GetAxisRaw("Horizontal") * speed * Time.deltaTime, 0, 0);
        // 플레이어 이동 범위 제한
        // Mathf.Clamp({x축 or y축}, {최솟값}, {최댓값})
        transform.position = new Vector2(Mathf.Clamp(transform.position.x, -moveableRange, moveableRange), transform.position.y);

        (*)// 스페이스바가 입력되면
        (*)if (Input.GetKeyDown(KeyCode.Space))
        (*){
            (*)Shoot();
        (*)}
    }

    (*)void Shoot()
    (*){
        (*)// 인스턴스 생성
        (*)// 인스펙터창에서 지정한 오브젝트(프리팹) 생성
        (*)// spawnPoint 변수에 설정된 위치
        (*)// 각도는 별도의 값을 넣지 않고 기본값 지정(Quaternion.identity) 0,0,0
        (*)GameObject newBullet = Instantiate(cannonBall, spawnPoint.position,  Quaternion.identity) as GameObject;
        (*)// AddForce -> 물리적인 힘 적용
        (*)// Vector3.up -> 발사할 방향을 위쪽으로 지정
        (*)// power -> 발사되는 힘
        (*)newBullet.GetComponent<Rigidbody2D>().AddForce(Vector3.up * power);
    (*)}
}
```

https://github.com/user-attachments/assets/49de3f1a-6cc4-458e-bd4d-0d1f4f5bef65

<br>

## 일정 시간 후에 포탄 제거

DestroyObj 스크립트|
|:---:|

```C#
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class DestroyObj : MonoBehaviour
{
    // 포탄 생성 후 제거될 시간
    public float deleteTime  = 2.0f;

    // Start is called before the first frame update
    void Start()
    {
        // 유니티 기본 함수
        // 오브젝트 제거
        Destroy(gameObject, deleteTime);
    }

    // Update is called once per frame
    void Update()
    {
        
    }
}
```


