# 데이터 저장 기능

게임의 진행 현황(한 번에 끝나지 않는 게임), 사운드 볼륨 등을 저장할 때 유용

## 승리 횟수 저장

__승리 횟수를 저장할__ 변수
- 싱글톤 패턴 사용
  - StartScene과 PlayScene 모두 필요
 
StartScene에 빈 오브젝트 추가(DataManager) &rarr; 새로운 DataManager 스크립트 생성 후 DataManager 오브젝트의 컴포넌트로 추가|
|:---:|
<img width="759" height="267" alt="스크린샷 2025-11-30 오후 8 27 02" src="https://github.com/user-attachments/assets/1430c695-c52b-4076-b88b-90a3bd840479" />|

DataManager 스크립트|
|:---:|

```C#
using UnityEngine;

public class DataManager : MonoBehaviour
{
    private int winCount;
    //프로퍼티
    public int WinCount
    {
        // WinCount 프로퍼티를 가져가려고 하면 winCount 변수 제공
        get { return winCount; }

        // WinCount 프로퍼티에 값을 할당하면 winCount 변수에 할당
        set
        {
            winCount = value;
            // 저장
            PlayerPrefs.SetInt("WinCount", winCount);
            // 물리적인 위치에 저장
            PlayerPrefs.Save();
        }
    }

    // 누구나 접근할 수 있는 DataManager의 인스턴스
    public static DataManager instance;

    private void Awake()
    {
        // 인스턴스가 비어있다면
        if (instance == null)
        {
            // 자기 자신 할당
            instance = this;

            // 씬 전환 시 삭제되지 않도록 유지
            DontDestroyOnLoad(gameObject);
        }

        // 인스턴스가 채워져있지만, 자기 자신과 다르다면
        else if (instance != this)
        {
            // 자기 자신의 오브젝트 삭제
            Destroy(gameObject);
        }
    }
}
```

__프로퍼티__
- `get`, `set`을 통해 변수의 읽기, 쓰기를 안전하게 관리 가능
- 변수를 읽거나 쓸 때마다 원하는 기능을 함께 처리 가능
- 프로퍼티 기본선언 형식
  - ```C#
    class 클래스명
    {
      데이터타입 필드명;
      접근한정자 데이터타입 프로퍼티명
      {
          get
          {
              return 필드명;
          }
          set
          {
              필드명 = value;
          }
      }
    }
    ```
- get
  - 속성 읽기
  - 없으면 쓰기 전용
- set / init
  - set이 없으면 읽기 전용

PlayerHP 스크립트|
|:---:|

```C#
...

public IEnumerator Ending(string result)
{
...

    (*)// 승리했다면 승리 횟수 증가
    (*)if (result == "승리") DataManager.instance.WinCount++;
}
```

<br>

# 불러오기 기능
