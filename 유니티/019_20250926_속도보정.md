# 속도 보정

## 준비

1. 속도를 조절할 수 있는 변수
2. 모든 방향으로의 이동 속도 규정화
3. 모든 기기에서 이동 속도를 동일하게 표현할 기준

## 기본 이동 속도

- 느리게 &rarr; 위치에 대한 값에 0보다 크고 1보다 작은 값의 곱
- 속도를 상수가 아닌 변수로 지정하고, 조금씩 조절하며 값을 결정하는 것이 좋음

### 이동 속도 보정

```C#
using UnityEngine;

public class Player : MonoBehaviour
{
    // 이동 속도
    public float moveSpeed;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        // 방향키 또는 WASD키 입력을 숫자로 받아서 저장
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");

        // x축에는 h의 값을, z축에는 v의 값을 계속 더하기
        transform.position += new Vector3(h, 0, v) * moveSpeed;
    }
}
```

저번에 했을 때는 엄청 휙휙 지나가서 키를 엄청 살짝살짝 눌러야 했는데 Move Speed를 0.05로 하니깐 키를 완전히 눌러도 부드럽게 보일만큼 천천히 움직인다.

<img width="430" height="71" alt="스크린샷 2025-09-26 오후 10 23 47" src="https://github.com/user-attachments/assets/c9de84b7-f739-4ed5-8482-9a2aa603799f" />

### 대각선으로 이동하는 속도 보정

- 가로와 세로 방향으로 이동하는 속도 < 대각선으로 이동하는 속도
  - 가로와 세로로 이동하는 속도를 1이라고 했을 때, 대각선으로 이동하는 속도는 피타고라스 정리에 의해 √2 이므로 조금더 빨리 움직이는 것
- 정규화 작업이 필요
  - 벡터가 갖는 크기와 방향 중 크기를 1로 맞춰 방향만 남도록 하는 작업
  - 속도를 결정하는 변수를 정규화 작업 전에 곱하면 적용되지 않으므로 정규화 후에 곱해야 함

- `Normalize()`함수 사용
  - `x.Normalize();`
  - x 값을 정규화하여 반환
- `normalized`변수 사용
  - `x = x.normalized;`
  - x 값을 정규화하여 x에 할당
 
```C#
using UnityEngine;

public class Player : MonoBehaviour
{
    // 이동 속도
    public float moveSpeed;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        // 방향키 또는 WASD키 입력을 숫자로 받아서 저장
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");

        // x축에는 h의 값을, z축에는 v의 값을 넣은 변수 생성
        // dir -> direction
        Vector3 dir = new Vector3(h, 0, v);

        // 모든 방향의 속도가 동일하도록 정규화
        dir.Normalize();

        // 이동할 방향에 원하는 속도 곱하기
        transform.position += dir * moveSpeed;
    }
}
```

 ### 프레임 기준 이동 속도 보정

- 위의 코드는 프레임마다 호출되기 때문에 컴퓨터마다 다를 수 있음.
  - 프레임 &rarr; 동적인 영상을 출력하기 위해 정적인 장면을 연속적으로 출력하는데 여기서 정적인 장면이 프레임
    - 1초당 프레임 수(FPS)가 많을수록 부드럽고 자연스러운 영상
  
> `transform.position += new Vector3(5, 0, 0);`
>> 10FPS -> 업데이트 함수 10번 호출 -> 5씩 더하는 작업이 10번 -> 50만큼 이동  
>> 80FPS -> 업데이트 함수 80번 호출 -> 5씩 더하는 작업이 80번 -> 400만큼 이동

- `deltaTime`변수 사용
  - 이전 프레임에서 현재 프레임에 도달하기까지 걸린 시간
 
> 10FPS -> 0초에서 1초까지 도달할 때 10프레임이 존재 -> 1프레임 == 1/10초 == `Time.deltaTime`

> 10FPS -> `Time.deltaTime` == 1/10 -> 50만큼 이동 -> 50 * `Time.deltaTime` == 50 * 1/10 == 5  
> 80FPS -> `Time.deltaTime` == 1/80 -> 400만큼 이동 -> 400 * `Time.deltaTime` == 400 * 1/80 == 5

```C#
using UnityEngine;

public class Player : MonoBehaviour
{
    // 이동 속도
    public float moveSpeed;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        
    }

    // Update is called once per frame
    void Update()
    {
        // 방향키 또는 WASD키 입력을 숫자로 받아서 저장
        float h = Input.GetAxis("Horizontal");
        float v = Input.GetAxis("Vertical");

        // x축에는 h의 값을, z축에는 v의 값을 넣은 변수 생성
        // dir -> direction
        Vector3 dir = new Vector3(h, 0, v);

        // 모든 방향의 속도가 동일하도록 정규화
        dir.Normalize();

        // 이동할 방향에 원하는 속도 곱하기 (모든 기기에서 동일한 속도)
        transform.position += dir * moveSpeed * Time.deltaTime;
    }
}
```

0.05로 설정하니깐 엄청 작게 움직임. 움직이지 않은 것처럼 보임. 5로 변경하니깐 움직이는데 뭔가 두우우우웅 하고 움직임.(조금 둔한 느낌?)
