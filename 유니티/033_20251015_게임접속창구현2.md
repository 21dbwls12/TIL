## 서버 - 로비

### 네트워크 연결 현황

시작 버튼 비활성화 이유 &rarr; 서버에 접속하기 전

 Canvas &rarr; UI &rarr; Legacy &rarr; Text(ConnectInfoTxt)

 Server 스크립트|
 |:---:|

 ```C#
using Photon.Pun;
using UnityEngine;
using UnityEngine.UI;

// 포톤 관련 콜백 함수를 상속받기 위함
public class Server : MonoBehaviourPunCallbacks
{
    // 시작 버튼
    public Button startBin;
    // 로비 화면
    public GameObject lobby;
    // 연결 현황 텍스트
    public Text connectInfoTxt;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        // 시작 버튼의 OnClick() 함수에 OnClickStart() 함수 연결
        startBin.onClick.AddListener(OnClickStart);

        // 시작 버튼 비활성화 상태로 시작
        startBin.interactable = false;

        // 서버 접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "서버 접속 중...";
    }

    // 시작 버튼 누르면 호출
    void OnClickStart()
    {
        // 로비 접속 시도
        PhotonNetwork.JoinLobby();
        connectInfoTxt.text = "로비 접속 중...";
    }

    // 서버 접속에 성공하면 호출
    public override void OnConnectedToMaster()
    {
        // 시작 버튼 활성화
        startBin.interactable = true;
        connectInfoTxt.text = "서버 접속 성공!";
    }

    // 로비 접속에 성공하면 호출
    public override void OnJoinedLobby()
    {
        // 로비 화면으로 전환
        gameObject.SetActive(false);
        lobby.SetActive(true);
        connectInfoTxt.text = "로비 접속 성공!";
    }
}
```

<img width="470" height="114" alt="스크린샷 2025-10-15 오후 5 11 40" src="https://github.com/user-attachments/assets/48c40979-077a-4f3c-88d2-b199627a7e71" />

플레이 전|<img width="588" height="421" alt="스크린샷 2025-10-15 오후 5 14 18" src="https://github.com/user-attachments/assets/012be5f1-0f14-4b1a-9e9b-4e9fe25a4974" />
|:---:|:---:|
서버 접속중|<img width="586" height="425" alt="스크린샷 2025-10-15 오후 5 14 46" src="https://github.com/user-attachments/assets/de87814e-9567-45b1-9cbb-2536d424a812" />
서버 접속 후|<img width="588" height="428" alt="스크린샷 2025-10-15 오후 5 14 58" src="https://github.com/user-attachments/assets/6f653e92-ab59-4938-b3e8-7ac099994465" />
시작 버튼 클릭|<img width="586" height="426" alt="스크린샷 2025-10-15 오후 5 15 41" src="https://github.com/user-attachments/assets/2c20d1b0-2b3f-44e9-aecc-c06bd82e849e" />

<br>

#### 접속 실패 경우

Server 스크립트 - 제일 마지막에 추가|
|:---:|

```C#
// 접속에 실패하면 호출
public override void OnDisconnected(DisconnectCause cause)
{
    // 서버 재접속 시도
    PhotonNetwork.ConnectUsingSettings();
    connectInfoTxt.text = "접속 실패, 서버 재접속 중...";
}
```

<br>

## 로비

### 방 만들기

Lobby &rarr; UI &rarr; Legacy &rarr; Input Field(RoomNameInput)

<img width="138" height="51" alt="스크린샷 2025-10-15 오후 7 31 45" src="https://github.com/user-attachments/assets/e07e1204-0690-4edf-beb1-62e7b6e378dc" />

- Placeholder
  - 입력 정보 미리보기
    <img width="587" height="417" alt="스크린샷 2025-10-15 오후 10 46 48" src="https://github.com/user-attachments/assets/18336b25-ce41-4cba-a84d-3643c8687a7b" />
- Text(Legacy)
  - 사용자 입력한 텍스트 출력
    <img width="587" height="423" alt="스크린샷 2025-10-15 오후 10 47 36" src="https://github.com/user-attachments/assets/26fc9aa5-4852-4b55-bc76-d667fb0dd2d5" />

<br>

#### 새로운 방 생성 버튼

Lobby &rarr; UI &rarr; Legacy &rarr; Button(CreateBtn)

<img width="587" height="421" alt="스크린샷 2025-10-15 오후 10 51 53" src="https://github.com/user-attachments/assets/6008a39b-91ce-4515-b20b-4659ef094d67" />

<br>

### 방 참가하기

이미 만들어져있는 방에 참가할 수 있도록 현재 존재하는 방의 목록 사용자에게 공개

방이 여러개일 때 모두 확인할 수 있도록 스크롤 사용
- Lobby &rarr; UI &rarr; Scroll View(RoomList)

<img width="171" height="64" alt="스크린샷 2025-10-15 오후 10 57 00" src="https://github.com/user-attachments/assets/5bb0eaa0-fbf8-4fc8-a105-7631e21bae14" />

- Viewport
  - 하위 항목에 있는 Content의 내용을 보여주는 공간
- Scrollbar Horizontal
  - 수평 스크롤
- Scrollbar Vertical
  - 수직 스크롤

수평 스크롤 삭제 후 수직 스크롤 밑에 공간이 생김|<img width="174" height="201" alt="스크린샷 2025-10-15 오후 10 59 26" src="https://github.com/user-attachments/assets/c87d7721-95b0-42eb-8a5d-44d072b81741" />
|:---:|:---:|
Scrollbar Vertical의 Bottom 0으로 변경|<img width="197" height="200" alt="스크린샷 2025-10-15 오후 11 00 32" src="https://github.com/user-attachments/assets/56c95e30-957c-4722-a36b-d0c2763a62af" />

<br>

RoomList &rarr; Viewport &rarr; Content &rarr; UI &rarr; Legacy &rarr; Button(RoomBtn)

Button의 하위 항목 Text(Legacy)의 속성 __Best Fit__
<img width="444" height="65" alt="스크린샷 2025-10-15 오후 11 05 09" src="https://github.com/user-attachments/assets/1ee10e21-2907-4fe4-ae98-8707aba9268a" />

- 글의 길이가 설정한 공간보다 길면 전부 출력될 수 있도록 Font Size를 최적의 크기로 줄여서 설정

원래 크기|<img width="122" height="24" alt="스크린샷 2025-10-15 오후 11 08 49" src="https://github.com/user-attachments/assets/eb1d2401-9980-4a2f-b54b-050143a09778" />
|:---:|:---:|
길어진 만큼 줄어든 크기|<img width="122" height="21" alt="스크린샷 2025-10-15 오후 11 11 01" src="https://github.com/user-attachments/assets/0b546756-e8bc-48f9-ba75-c98f10ecda61" />

<br>

RoomBtn은 게임이 시작된 후 방의 개수만큼 생성되어야 하므로 프리팹화|<img width="81" height="19" alt="스크린샷 2025-10-15 오후 11 12 50" src="https://github.com/user-attachments/assets/43964611-0472-47c1-affa-ae751f4b8e3a" />|
|:---:|:---:|
RoomBtn 프리팹이 여러개 만들어지면 같은 곳에 생성되므로 자동 정렬 기능 사용|<img width="740" height="491" alt="스크린샷 2025-10-15 오후 11 45 51" src="https://github.com/user-attachments/assets/3bd30d4d-1296-4843-9fca-be582a8f6b6e" />|
RoomBtn 여러개 생성하면 자동 정렬되어 보여짐|<img width="208" height="235" alt="스크린샷 2025-10-15 오후 11 47 26" src="https://github.com/user-attachments/assets/63a5ce41-9a67-4238-bae3-d332765de8ea" />|
스크롤 공간을 넘어갈만큼 여러개 생성했음에도 스크롤이 안됨|<img width="187" height="239" alt="스크린샷 2025-10-15 오후 11 51 24" src="https://github.com/user-attachments/assets/b83d609c-10bd-4fe3-ae82-c68d9f70be02" />
RoomList 하위 Content에 Content Size Fitter 컴포넌트 추가|<img width="467" height="70" alt="스크린샷 2025-10-15 오후 11 52 15" src="https://github.com/user-attachments/assets/ffca046f-60c8-44f5-8ecb-259b3b3320f4" />
Content Size Fitter 추가 후|<img width="178" height="208" alt="스크린샷 2025-10-15 오후 11 53 33" src="https://github.com/user-attachments/assets/02ee450b-99ad-4e6d-85c2-a18a3de5d292" />

<br>

로비 UI

<img width="586" height="422" alt="스크린샷 2025-10-15 오후 11 56 00" src="https://github.com/user-attachments/assets/b533a590-8adf-4fd8-ac59-c1c5f52dad06" />

<br>

### 방 만들기 기능 구현
