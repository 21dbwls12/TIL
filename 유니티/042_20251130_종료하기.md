# 종료 기능 추가

시작 화면에 있는 종료 버튼을 클릭했을 때 종료

Server 스크립트|
|:---:|

```C#
using Photon.Pun;
using Photon.Realtime;
using UnityEngine;
using UnityEngine.UI;

// 포톤 관련 콜백 함수를 상속받기 위함
public class Server : MonoBehaviourPunCallbacks
{
    // 시작 버튼
    public Button startBin;
    (*)// 종료 버튼
    (*)public Button exitBtn;
    // 로비 화면
    public GameObject lobby;
    // 연결 현황 텍스트
    public Text connectInfoTxt;
    // 승리 횟수 텍스트
    public Text winCountTxt;

    // Start is called once before the first execution of Update after the MonoBehaviour is created
    void Start()
    {
        // 시작 버튼의 OnClick() 함수에 OnClickStart() 함수 연결
        startBin.onClick.AddListener(OnClickStart);

        (*)// 종료 버튼의 OnClick() 함수에 OnClickExit() 함수 연결
        (*)exitBtn.onClick.AddListener(OnClickExit);

        // 시작 버튼 비활성화 상태로 시작
        startBin.interactable = false;

        // 서버 접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "서버 접속 중...";

        // 승리 횟수 출력
        winCountTxt.text = "승리 횟수 : " + DataManager.instance.WinCount.ToString();
    }

    // 시작 버튼 누르면 호출
    void OnClickStart()
    {
        // 클릭 효과음 재생
        AudioManager.instance.Audio_Click(0);

        // 로비 접속 시도
        PhotonNetwork.JoinLobby();
        connectInfoTxt.text = "로비 접속 중...";
    }

    (*)// 종료 버튼을 누르면 호출
    (*)void OnClickExit()
    (*){
        (*)// 버큰 클릭 효과음 재생
        (*)AudioManager.instance.Audio_Click(0);

        (*)// 유니티 에디터에서 플레이 버튼을 누르는 것과 동일한 기능
        (*)// 게임 종료
        (*)UnityEditor.EditorApplication.isPlaying = false;
    (*)}

    // 서버 접속에 성공하면 호출
    public override void OnConnectedToMaster()
    {
        // 시작 버튼 활성화
        startBin.interactable = true;
        connectInfoTxt.text = "서버 접속 성공!";
    }

    // 로비 접속에 성공하면 호출
    public override void OnJoinedLobby()
    {
        // 로비 화면으로 전환
        gameObject.SetActive(false);
        lobby.SetActive(true);
        connectInfoTxt.text = "로비 접속 성공!";
    }

    // 접속에 실패하면 호출
    public override void OnDisconnected(DisconnectCause cause)
    {
        // 서버 재접속 시도
        PhotonNetwork.ConnectUsingSettings();
        connectInfoTxt.text = "접속 실패, 서버 재접속 중...";
    }
}
```

Server 오브젝트의 ExitBtn 변수에 ExitBtn 오브젝트 할당|
|:---:|
<img width="760" height="477" alt="스크린샷 2025-11-30 오후 11 58 49" src="https://github.com/user-attachments/assets/d3d3c3eb-1c09-495f-aa76-f04a4078a022" />|

종료 버튼 클릭 시 종료되는 것 확인


