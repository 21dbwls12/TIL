앱 이름 변경 => res -> values -> strings.xml
```kotlin
<resources>
    <string name="app_name">나의 발자취</string>
</resources>
```
MainActivity
```kotlin
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            EditMyRecordTheme {
                MapScreen()
            }
        }
    }
}
```

RecordActivity
```kotlin
class RecordActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            EditMyRecordTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = Color.White
                ) {
                    RecordScreen()
                }
            }
        }
    }
}

@Composable
fun RecordScreen() {
    var clickRecord by remember { mutableStateOf(false) }
    val context = LocalContext.current
    val db = remember {
        AppDatabase.getDatabase(context)
    }
    val recordList by db.recordDao().getAll().collectAsState(initial = emptyList())
    val scope = rememberCoroutineScope()
    var clickRecent by remember { mutableStateOf(false) }
    var clickInfoUid by remember { mutableStateOf(0) }


    Box {
        //최근 추억 하단에 고정하기 위한 Column
        Column {
            Spacer(modifier = Modifier.height(100.dp))
            Column(
                modifier = Modifier
                    .weight(1f)
                    .fillMaxWidth(),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.Center,
            ) {
                //기록 입력하기 위한 기록창과 연결된 버튼
                Button(
                    onClick = { clickRecord = !clickRecord },
                    colors = ButtonDefaults.buttonColors(Grey50),
                    shape = RoundedCornerShape(10.dp),
                    modifier = Modifier
                        .size(353.dp)
                        .padding(10.dp),
                    border = BorderStroke(1.dp, Grey200)
                ) {
                    Column(
                        horizontalAlignment = Alignment.CenterHorizontally,
                        verticalArrangement = Arrangement.Center
                    ) {
                        MainText(maintext = "오늘의 기억", fontSize = 24)
                        Spacer(modifier = Modifier.width(15.dp))
                        Icon(
                            painter = painterResource(id = R.drawable.addcircle),
                            contentDescription = "기억을 기록하세요",
                            tint = Color(0xFF26282B)
                        )
                    }
                }
                Column(
                    verticalArrangement = Arrangement.Bottom,
                    modifier = Modifier
                        .padding(15.dp)
                        .fillMaxSize(),
                ) {
                    MainText(maintext = "최근 추억", fontSize = 16)
                    Spacer(modifier = Modifier.height(20.dp))
                    Row(
                        modifier = Modifier
                            .horizontalScroll(rememberScrollState())
                            .fillMaxWidth()
                            .height(170.dp),
                    ) {
                        val sortedRecordList = recordList.sortedByDescending { it.uid }

                        for (index in 0 .. 4) {
                            RecentLogview(record = sortedRecordList.getOrNull(index)) {
                                clickInfoUid = sortedRecordList.getOrNull(index)?.uid ?: clickInfoUid
                                clickRecent = true
                            }
                            Spacer(modifier = Modifier.width(15.dp))
                        }
                    }
                }
            }
            NavigateBar(
                homeColor = BlueGreen,
                searchColor = Grey900,
                mapColor = Grey900,
                myRecordColor = Grey900,
                context = context
            )
        }
        if (clickRecord) {
            InputRecord(context = context, db = db, scope = scope) {
                clickRecord = false
            }
        }
        if (clickRecent) {
            MyRecordView(
                record = recordList.find { it.uid == clickInfoUid }!!,
                context = context,
                db = db,
                scope = scope
            ) {
                clickRecent = false
            }
        }
    }
}

//MainActivity에 있는 Text틀
@Composable
fun MainText(maintext: String, fontSize: Int) {
    Text(
        text = maintext,
        fontWeight = FontWeight.Bold,
        fontSize = fontSize.sp,
        color = Grey900,
    )
}

//최근 추억에 들어갈 Button
//클릭시 해당 내용으로 이동
@Composable
fun RecentLogview(record: Record?, onClick: () -> Unit) {
    val changeUri = record?.photo?.trim('[', ']')?.replace(" ", "")
    val uriStringList = changeUri?.split(",")
    val uriList = uriStringList?.map { Uri.parse(it) }
//    val firstUriList = remember { mutableStateOf(uriList?.getOrNull(0)) }
    val firstUriList = uriList?.getOrNull(0) ?: null

    record?.let {
        Card(
            shape = RoundedCornerShape(10.dp),
            modifier = Modifier
                .size(135.dp)
                .clickable { onClick() },
        ) {
            AsyncImage(
                model = firstUriList,
                contentDescription = "사진",
                contentScale = ContentScale.Crop,
            )
        }
    }
}

//내비게이션바
@Composable
fun NavigateBar(
    homeColor: Color,
    searchColor: Color,
    mapColor: Color,
    myRecordColor: Color,
    context: Context
) {
    Surface(
        modifier = Modifier
            .fillMaxWidth()
            .height(60.dp),
        color = Color.White
    ) {
        Column {
            Box(
                modifier = Modifier
                    .height(4.dp)
                    .fillMaxWidth()
                    .background(
                        brush = gra(
                            "v",
                            "shadow"
                        ) as Brush,
                        shape = RectangleShape
                    )
            )
            Row(
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                NavigateBarButton(
                    bannerMenu = "기록",
                    navigateIcon = R.drawable.editnote,
                    iconDetail = "기록 화면",
                    color = homeColor,
                    onClick = {
                        //!is는 클래스의 인스턴스거나 그의 하위 클래스가 아닐 때 조건이 참
                        //!=는 클래스의 인스턴스를 직접 비교
                        if (context !is RecordActivity) {
                            val intent = Intent(context, RecordActivity::class.java)
                            context.startActivity(intent)
                        }
                    }
                )
                NavigateBarButton(
                    bannerMenu = "검색",
                    navigateIcon = R.drawable.search,
                    iconDetail = "검색 화면",
                    color = searchColor,
//                    context = context,
                    onClick = {
                        if (context !is SearchActivity) {
                            val intent = Intent(context, SearchActivity::class.java)
                            context.startActivity(intent)
                        }
                    }
                )
                NavigateBarButton(
                    bannerMenu = "지도",
                    navigateIcon = R.drawable.map,
                    iconDetail = "지도 화면",
                    color = mapColor,
//                    context = context,
                    onClick = {
                        if (context !is MapActivity && context !is MainActivity) {
                            val intent = Intent(context, MapActivity::class.java)
                            context.startActivity(intent)
                        }
                    }
                )
                NavigateBarButton(
                    bannerMenu = "내 기록",
                    navigateIcon = R.drawable.inventory,
                    iconDetail = "내 기록 화면",
                    color = myRecordColor,
//                    context = context,
                    onClick = {
                        if (context !is MyRecordActivity) {
                            val intent = Intent(context, MyRecordActivity::class.java)
                            context.startActivity(intent)
                        }
                    }
                )
            }
        }
    }
}

//내비게이션바 안에 들어갈 Button
//클릭시 화면 전환
@Composable
fun NavigateBarButton(
    bannerMenu: String,
    navigateIcon: Int,
    iconDetail: String,
    color: Color,
//    context: Context,
    onClick: () -> Unit
//    intent: Intent
//    componentActivity: Class<out ComponentActivity>
) {

    Button(
        onClick = onClick,
        modifier = Modifier
            .fillMaxHeight()
            .width(90.dp),
        colors = ButtonDefaults.buttonColors(Color.White),
        shape = RoundedCornerShape(10.dp)
    ) {
        Column(
            horizontalAlignment = Alignment.CenterHorizontally
        ) {
            Icon(
                painter = painterResource(id = navigateIcon),
                contentDescription = iconDetail,
                tint = color
            )
            Text(
                text = bannerMenu,
                color = color,
                textAlign = TextAlign.Center,
                fontSize = 13.sp,
                fontWeight = FontWeight.Bold,
                modifier = Modifier
                    .fillMaxWidth()
            )
        }
    }
}

//MainActivity에 띄울 기록 입력 창
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun InputRecord(context: Context, db: AppDatabase, scope: CoroutineScope, onBack: () -> Unit) {
    var title by remember { mutableStateOf("") }
    var place by remember { mutableStateOf("") }
    var date by remember { mutableStateOf("") }
    var mainText by remember { mutableStateOf("") }
    var isTitleFocused by remember { mutableStateOf(true) }
    var isContentFocused by remember { mutableStateOf(true) }
//    var clickSave by remember { mutableStateOf(false) }
    var tag by remember { mutableStateOf("") }
    //사진 다중 선택
    var selectUris by remember {
        mutableStateOf<List<Uri>>(emptyList())
    }
    //사진 불러오기 위한 런처
    val launcherM = rememberLauncherForActivityResult(
        contract = ActivityResultContracts.PickMultipleVisualMedia(),
        onResult = {
            selectUris = it
        }
    )

    Surface(
        modifier = Modifier
            .fillMaxSize(),
        color = Color.White
    ) {
        Column {
            //상단
            Column(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(48.dp)
            ) {
                Row(
                    horizontalArrangement = Arrangement.SpaceBetween,
                    modifier = Modifier.fillMaxSize()
                ) {
                    TopButton(
                        onClick = { onBack() },
                        icon = R.drawable.arrowback,
                        detail = "뒤로 가기",
                        color = Grey900,
                        modifier = Modifier.padding(top = 3.dp),
                        text = "이전",
                        fontWeight = FontWeight.Medium
                    )
                    Text(
                        text = "오늘의 기억 등록하기",
                        color = Grey900,
                        textAlign = TextAlign.Center,
                        fontSize = 16.sp,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier
                            .height(48.dp)
                            .width(150.dp)
                            .padding(top = 12.dp),
                    )
                    TopButton(
                        onClick = {
                            if (selectUris.isNotEmpty() && place.isNotBlank() && date.isNotBlank()) {
                                val newRecord = Record(
                                    title = title,
                                    date = date,
                                    place = place,
                                    mainText = mainText,
                                    tag = tag,
                                    photo = selectUris.toString()
                                )
                                scope.launch(Dispatchers.IO) {
                                    db.recordDao().insertAll(newRecord)
                                }
                                val intent = Intent(context, MapActivity::class.java)
                                context.startActivity(intent)
                            }
                        },
                        icon = R.drawable.done,
                        detail = "저장 하기",
                        color = BlueGreen,
                        modifier = Modifier,
                        text = "저장",
                        fontWeight = FontWeight.Bold
                    )
                }
            }
            //입력될 TextField만 스크롤 가능
            Column(
                horizontalAlignment = Alignment.CenterHorizontally,
            ) {
                LazyColumn(
                    modifier = Modifier.fillMaxSize()
                ) {
                    item {
                        Spacer(modifier = Modifier.height(10.dp))
                        TextField(
                            value = title,
                            onValueChange = {
                                title = it
                                isTitleFocused = false
                            },
                            label = {
                                if (isTitleFocused) {
                                    Text(
                                        text = "제목",
                                        color = Grey400,
                                        fontWeight = FontWeight.Medium,
                                        fontSize = 20.sp
                                    )
                                }
                            },
                            textStyle = TextStyle(
                                textAlign = TextAlign.Start,
                                fontWeight = FontWeight.Bold,
                                fontSize = 16.sp
                            ),
                            colors = TextFieldDefaults.textFieldColors(
                                textColor = BlueGreen,
                                containerColor = Color.White,
                                cursorColor = Color(0xff03b2b2),
                                disabledIndicatorColor = Color.White,
                                focusedIndicatorColor = Color.White,
                                unfocusedIndicatorColor = Color.White,
                            ),
                            modifier = Modifier
                                .height(60.dp)
                                .fillMaxWidth()
                                .padding(start = 20.dp, end = 20.dp),
                        )
                        Line()
                        DefaultTextField(text = "장소", value = place, onValuechange = { place = it })
                        Line()
                        DefaultTextField(text = "날짜", value = date, onValuechange = { date = it })
                        Line()
                        TextField(
                            value = mainText,
                            onValueChange = {
                                mainText = it
                                isContentFocused = false
                            },
                            label = {
                                if (isContentFocused) {
                                    Text(
                                        text = "내용을 입력하세요.",
                                        color = Grey400,
                                        fontWeight = FontWeight.Medium
                                    )
                                }
                            },
                            colors = TextFieldDefaults.textFieldColors(
                                textColor = Grey900,
                                containerColor = Color.White,
                                cursorColor = Color(0xff03b2b2),
                                disabledIndicatorColor = Color.White,
                                focusedIndicatorColor = Color.White,
                                unfocusedIndicatorColor = Color.White
                            ),
                            modifier = Modifier
                                .fillMaxWidth()
                                .height(385.dp)
                                .padding(start = 20.dp, end = 20.dp, top = 10.dp, bottom = 16.dp)
                        )
                        Line()
                        //해시태그 사용하면 색깔이 바뀌게 되는 것도 가능?
                        DefaultTextField(text = "태그", value = tag, onValuechange = { tag = it })
                        Line()
                        //사진 선택 도구
                        Button(
                            onClick = {
                                launcherM.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo))
                            },
                            colors = ButtonDefaults.buttonColors(Grey100),
                            modifier = Modifier
                                .fillMaxWidth()
                                .height(70.dp)
                                .padding(start = 20.dp, end = 20.dp, top = 16.dp),
                            shape = RoundedCornerShape(10.dp)
                        ) {
                            Row(
                                horizontalArrangement = Arrangement.Center
                            ) {
                                Icon(
                                    painter = painterResource(id = R.drawable.addphoto),
                                    contentDescription = "사진 추가",
                                    tint = Grey900
                                )
                                Spacer(modifier = Modifier.width(5.dp))
                                Text(
                                    text = "사진 등록하기",
                                    color = Grey900,
                                    fontSize = 16.sp,
                                    fontWeight = FontWeight.Medium
                                )
                            }
                        }
                    }
                    //불러온 사진 위치
                    val rows = selectUris.chunked(3)
                    items(rows) { rowUris ->
                        Row(
                            modifier = Modifier
                                .fillMaxWidth()
                                .padding(start = 5.dp, end = 5.dp),
                        ) {
                            rowUris.forEach { uri ->
                                Card(
                                    shape = RoundedCornerShape(10.dp),
                                    modifier = Modifier
                                        .padding(3.dp)
                                        .size(120.dp),
                                ) {
                                    AsyncImage(
                                        model = uri,
                                        contentDescription = "사진들",
                                        contentScale = ContentScale.Crop
                                    )
                                    //AsynImage 대신
                                    //val bitmap = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
                                    //    ImageDecoder.decodeBitmap(
                                    //        ImageDecoder.createSource(
                                    //            context.contentResolver,
                                    //            uri
                                    //        )
                                    //    )
                                    //} else {
                                    //    MediaStore.Images.Media.getBitmap(context.contentResolver, uri)
                                    //}
                                    //GetBitmap(bitmap = bitmap)
                                    //이 코드를 쓰려고 했는데 contentScale = ContentScale.Crop 이렇게 출력할 방법을 찾지 못함
                                }
                            }
                        }
                        //LazyColumn안에는 LazyVerticalGrid는 사용이 안됨.
                        // LazyColumn안에 넣은 내용들이 같이 스크롤이 되게 하려고 했음
//                LazyVerticalGrid(
//                    columns = GridCells.Fixed(3),
//                    modifier = Modifier
//                        .fillMaxSize()
//                        .padding(16.dp)
//                ) {
//                    items(selectUris) { uri ->
//                        Card(
//                            shape = RoundedCornerShape(10.dp),
//                            modifier = Modifier.padding(3.dp),
//                        ) {
////                            val bitmap = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
////                                ImageDecoder.decodeBitmap(
////                                    ImageDecoder.createSource(
////                                        context.contentResolver,
////                                        uri
////                                    )
////                                )
////                            } else {
////                                MediaStore.Images.Media.getBitmap(context.contentResolver, uri)
//                            AsyncImage(
//                                model = uri,
//                                contentDescription = "사진들",
//                                contentScale = ContentScale.Crop
//                            )
//                        }
////                            GetBitmap(bitmap = bitmap)
//
//                    }
//                }
//            }
                    }
                }
            }
        }
    }
}

@Composable
fun TopButton(
    onClick: () -> Unit,
    icon: Int? = null,
    detail: String,
    color: Color,
    modifier: Modifier,
    text: String,
    fontWeight: FontWeight
) {
    Button(
        onClick = onClick,
        colors = ButtonDefaults.buttonColors(Color.White),
        modifier = Modifier
            .height(48.dp)
            .width(100.dp)
    ) {
        if (icon != null) {
            Icon(
                painter = painterResource(id = icon),
                contentDescription = detail,
                tint = color,
                modifier = modifier
            )
        }
        Text(text = text, color = color, fontWeight = fontWeight, fontSize = 14.sp)
    }
}

//기록 입력창에 입력할 기본 정보 TextField
@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun DefaultTextField(text: String, value: String, onValuechange: (String) -> Unit) {
    Row(
        verticalAlignment = Alignment.CenterVertically,
        horizontalArrangement = Arrangement.SpaceBetween,
        modifier = Modifier
            .padding(start = 20.dp, end = 20.dp)
            .fillMaxWidth()
            .height(60.dp)
    ) {
        Text(text = text, color = Grey900, fontSize = 16.sp, fontWeight = FontWeight.Medium)
        Spacer(modifier = Modifier.width(5.dp))
        TextField(
            value = value,
            onValueChange = onValuechange,
            modifier = Modifier
                .height(50.dp),
            maxLines = 1,
            textStyle = TextStyle(
                textAlign = TextAlign.End,
                fontWeight = FontWeight.Bold,
                fontSize = 14.sp
            ),
            colors = TextFieldDefaults.textFieldColors(
                textColor = BlueGreen,
                containerColor = Color.White,
                cursorColor = Color(0xff03b2b2),
                disabledIndicatorColor = Color.White,
                focusedIndicatorColor = Color.White,
                unfocusedIndicatorColor = Color.White
            ),
        )
    }
}

@Composable
fun Line() {
    Divider(thickness = 1.dp, color = Grey100)
}

@Composable
fun GetBitmap(bitmap: Bitmap) {
    Image(bitmap = bitmap.asImageBitmap(), contentDescription = "")
}

//그라데이션
@Composable
fun gra(select: String, color: String): Any {
    val shadow = listOf(
        Color(0xfffcfcfc),
        Color(0xfffafafa),
        Color(0xfff8f8f8),
        Color(0xfff6f6f6),
        Color(0xfff4f4f4),
    )
    val shadowReverse = shadow.reversed()

    return when (select) {
        "v" -> {
            when (color) {
                "shadow" ->
                    Brush.verticalGradient(
                        shadow
                    )

                "shadowReverse" ->
                    Brush.verticalGradient(
                        shadowReverse
                    )

                else -> {}
            }
        }

        "h" -> {
            when (color) {
                "shadow" ->
                    Brush.horizontalGradient(
                        shadow
                    )

                "shadowReverse" ->
                    Brush.horizontalGradient(
                        shadowReverse
                    )

                else -> {}
            }
        }

        "R" -> {
            when (color) {
                "shadow" ->
                    Brush.radialGradient(
                        shadow
                    )

                "shadowReverse" ->
                    Brush.radialGradient(
                        shadowReverse
                    )

                else -> {}
            }
        }

        else -> {}
    }
}
```

SearchActivity
```kotlin
class SearchActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            EditMyRecordTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = Color.White
                ) {
                    SearchScreen()
                }
            }
        }
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun SearchScreen() {
    var searchText by remember { mutableStateOf("") }
    var isContentFocused by remember { mutableStateOf(true) }
    val context = LocalContext.current
    var clickSearch by remember { mutableStateOf(false) }
    var searchedText by remember { mutableStateOf("") }
    val db = remember {
        AppDatabase.getDatabase(context)
    }
    val recordList by db.recordDao().getAll().collectAsState(initial = emptyList())
    val scope = rememberCoroutineScope()
    var clickSearchList by remember { mutableStateOf(false) }
    var clickInfoUid by remember { mutableStateOf(0) }

    Column {
        Column(
            modifier = Modifier.weight(1f)
        ) {
            Row(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(100.dp),
                verticalAlignment = Alignment.CenterVertically,
                horizontalArrangement = Arrangement.SpaceBetween
            ) {
                Box(
                    modifier = Modifier
                        .height(80.dp)
                        .width(300.dp)
                ) {
                    TextField(
                        value = searchText,
                        onValueChange = {
                            searchText = it
                            isContentFocused = false
                        },
                        label = {
                            if (isContentFocused) {
                                Text(
                                    text = "제목, 장소, 날짜, 해시태그",
                                    color = Grey400,
                                    fontWeight = FontWeight.Medium,
                                    fontSize = 16.sp,
                                    textAlign = TextAlign.Center
                                )
                            }
                        },
                        colors = TextFieldDefaults.textFieldColors(
                            textColor = BlueGreen,
                            containerColor = Grey200,
                            cursorColor = BlueGreen,
                            disabledIndicatorColor = Color.White,
                            focusedIndicatorColor = Color.White,
                            unfocusedIndicatorColor = Color.White
                        ),
                        modifier = Modifier
                            .width(300.dp)
                            .height(80.dp)
                            .padding(start = 20.dp, end = 0.dp, top = 10.dp, bottom = 3.dp),
                        shape = RoundedCornerShape(10.dp),
                        maxLines = 1
                    )
                    Box(
                        contentAlignment = Alignment.BottomEnd,
                        modifier = Modifier.fillMaxSize()
                    ) {
                        Button(
                            onClick = {
                                clickSearch = false
                                searchText = ""
                            },
                            colors = ButtonDefaults.buttonColors(Grey200),
                            modifier = Modifier
                                .height(80.dp)
                                .width(50.dp)
                                .padding(bottom = 20.dp, top = 20.dp),
                            contentPadding = PaddingValues(0.dp),
                            shape = RoundedCornerShape(10.dp)
                        ) {
                            Text(
                                text = "x",
                                color = Color(0xfff02323),
                                fontSize = 18.sp,
                                modifier = Modifier.padding(0.dp)
                            )
                        }
                    }
                }
                Button(
                    onClick = {
                        clickSearch = true
                        searchedText = searchText
                    },
                    colors = ButtonDefaults.buttonColors(Color.White),
                    modifier = Modifier
                        .height(80.dp)
                        .width(80.dp)
                        .padding(top = 10.dp, bottom = 10.dp),
                    contentPadding = PaddingValues(0.dp)
                ) {
                    Text(
                        text = "검색",
                        color = Grey900,
                        fontSize = 14.sp,
                        modifier = Modifier.padding(0.dp)
                    )
                }
            }
            Divider(thickness = 1.dp, color = Grey100)
            Column(
                modifier = Modifier.verticalScroll(rememberScrollState()),
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                val searchList = recordList.filter {
                    val tagList = it.tag?.split("#")?.map { it.trim() }
                    if (clickSearch) {
                        it.title == searchedText || it.place == searchedText || it.date == searchedText || tagList?.any {it == searchedText} ?: false
                    } else {
                        false
                    }
                }
                Spacer(modifier = Modifier.height(15.dp))
                for (record in searchList) {
                    SearchList(
                        record = record,
                        onClick = {
                            clickInfoUid = record.uid
                            clickSearchList = !clickSearchList
                        }
                    )
                    Divider(thickness = 1.dp, color = Grey100)
                    Spacer(modifier = Modifier.height(10.dp))
                }
            }
        }
        Column {
            NavigateBar(
                homeColor = Grey900,
                searchColor = BlueGreen,
                mapColor = Grey900,
                myRecordColor = Grey900,
                context = context
            )
        }
    }
    if (clickSearchList) {
        MyRecordView(record = recordList.find { it.uid == clickInfoUid }!!, context = context, db = db, scope = scope) {
            clickSearchList = false
        }
    }
}

@Composable
fun SearchList(record: Record?, onClick: () -> Unit) {

    Button(
        onClick = onClick,
        modifier = Modifier
            .fillMaxWidth()
            .height(80.dp),
        colors = ButtonDefaults.buttonColors(Color.White),
        contentPadding = PaddingValues(0.dp),
        shape = RoundedCornerShape(10.dp)
    ) {
        Row(
            horizontalArrangement = Arrangement.Center
        ) {
            Column(
                horizontalAlignment = Alignment.CenterHorizontally
            ) {
                Text(
                    text = "${record?.place}",
                    fontSize = 20.sp,
                    color = Grey900,
                    modifier = Modifier.width(300.dp),
                    textAlign = TextAlign.Start
                )
                Spacer(modifier = Modifier.height(5.dp))
                Text(
                    text = "${record?.date}",
                    fontSize = 16.sp,
                    color = Grey500,
                    modifier = Modifier.width(300.dp),
                    textAlign = TextAlign.End
                )
            }
            Spacer(modifier = Modifier.height(10.dp))
        }
    }
}
```

MapActivity
```kotlin
class MapActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            EditMyRecordTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = Color.White
                ) {
                    MapScreen()
                }
            }
        }
    }
}

@Composable
fun MapScreen() {
    val context = LocalContext.current

    Column {
        Column(
            modifier = Modifier.weight(1f)
        ) {
            MapViewScreen(context = context)
        }
        Column {
            NavigateBar(
                homeColor = Grey900,
                searchColor = Grey900,
                mapColor = BlueGreen,
                myRecordColor = Grey900,
                context = context
            )
        }
    }
}

@Composable
fun MapViewScreen(context: Context) {
    val center = LatLng(35.95, 127.95)
    val cameraPositionState = rememberCameraPositionState {
        position = CameraPosition.fromLatLngZoom(center, 7.15f)
    }
    var currentLocation by remember { mutableStateOf<LatLng?>(null) }
//    val fusedLocationClient = remember(context) {
//        LocationServices.getFusedLocationProviderClient(context)
//    }
//    val locationPermissionRequest = rememberLauncherForActivityResult(contract = ActivityResultContracts.RequestPermission()) { permissions ->
//        if (permissions) {
//            fusedLocationClient.lastLocation.addOnSuccessListener { location ->
//                if (location != null) {
//                    val latitude = location.latitude
//                    val longitude = location.longitude
//                }
//            }
//        }
//    }

    Box(
        modifier = Modifier.fillMaxSize()
    ) {
        GoogleMap(
            modifier = Modifier.fillMaxSize(),
            cameraPositionState = cameraPositionState
        ) {
            Marker()

        }
        Box {
            Row(
                modifier = Modifier.fillMaxWidth(),
                horizontalArrangement = Arrangement.End
            ) {
                IconButton(
                    onClick = {
//                        val fusedLocationClient =
//                            LocationServices.getFusedLocationProviderClient(context)
//                        if (ActivityCompat.checkSelfPermission(
//                                context,
//                                Manifest.permission.ACCESS_FINE_LOCATION
//                            ) != PackageManager.PERMISSION_GRANTED && ActivityCompat.checkSelfPermission(
//                                context,
//                                Manifest.permission.ACCESS_COARSE_LOCATION
//                            ) != PackageManager.PERMISSION_GRANTED
//                        ) {
//                            val locationPermissionRequest = rememberLauncherForActivityResult(
//                                contract = ActivityResultContracts.RequestMultiplePermissions()
//                            ) { permissions ->
//                                when {
//                                    permissions.getOrDefault(Manifest.permission.ACCESS_FINE_LOCATION, false) -> {
//
//                                    }
//                                    permissions.getOrDefault(Manifest.permission.ACCESS_COARSE_LOCATION, false) -> {
//
//                                    }
//                                    else -> {  }
//                                }
//                            }
//                            ActivityResultContracts.RequestMultiplePermissions() { permissions ->
//
//                            }
//                            ActivityCompat.requestPermissions(
//                                context as Activity,
//                                arrayOf(
//                                    Manifest.permission.ACCESS_FINE_LOCATION,
//                                    Manifest.permission.ACCESS_COARSE_LOCATION
//                                ),
//                                requestCode
//                            )
//                            return@IconButton
//                        }
//                        fusedLocationClient.lastLocation.addOnSuccessListener { location ->
//                            if (location != null) {
//                                currentLocation = LatLng(location.latitude, location.longitude)
//                                cameraPositionState.position = CameraPosition.fromLatLngZoom(
//                                    LatLng(location.latitude, location.longitude), 12f
//                                )
//                                    LatLng(location.latitude, location.longitude)
//                                )
//                            }
//                        }
                    }
                ) {
                    Icon(
                        painter = painterResource(id = R.drawable.mylocation),
                        contentDescription = "현재 위치",
                        tint = Grey900
                    )
                    currentLocation?.let { location ->
                        Text(text = "${location.latitude}, ${location.longitude}")
                    }
                }
            }
        }
    }
}
```

MyRecordActivity
```kotlin
class MyRecordActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            EditMyRecordTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = Color.White
                ) {
                    MyRecordScreen()
                }
            }
        }
    }
}

@Composable
fun MyRecordScreen() {
    var clickPhoto by remember { mutableStateOf(false) }
    var clickInfoUid by remember { mutableStateOf(0) }
    val context = LocalContext.current
    val db = remember {
        AppDatabase.getDatabase(context)
    }
    val recordList by db.recordDao().getAll().collectAsState(initial = emptyList())
//    val firstPhotoList: List<Bitmap> = recordList.map { record ->
//        val uriList = UriListConverter().toUrisList(record.photo).first()
//        val contentResolver = context.contentResolver
//        MediaStore.Images.Media.getBitmap(contentResolver, uriList)
//    }
    val scope = rememberCoroutineScope()

    Column {
        Column(
            modifier = Modifier
                .weight(1f)
                .padding(start = 10.dp, end = 10.dp, top = 15.dp)
        ) {
            LazyVerticalGrid(columns = GridCells.Adaptive(minSize = 170.dp)) {
                items(recordList) { record ->
                    ImageItem(
                        record = record,
                        context = context,
                        onClick = {
                            clickInfoUid = record.uid
                            clickPhoto = !clickPhoto
                        }
                    )
                }
            }
        }
        Column {
            NavigateBar(
                homeColor = Grey900,
                searchColor = Grey900,
                mapColor = Grey900,
                myRecordColor = BlueGreen,
                context = context
            )
        }
    }
    if (clickPhoto) {
        MyRecordView(
            record = recordList.find { it.uid == clickInfoUid }!!,
            context = context,
            db = db,
            scope = scope
        ) {
            clickPhoto = false
        }
    }
}


@Composable
fun ImageItem(record: Record, context: Context, onClick: () -> Unit) {
    val changeUri = record.photo.trim('[', ']').replace(" ", "")
    val uriStringList = changeUri.split(",")
    val uriList = uriStringList.map { Uri.parse(it) }
    //uriLsit!![0]보다는 remember사용하면 상태가 변경될 때만 작동하기 때문에 불필요한 작동을 방지할 수 있음.
    var firstUriList = remember { mutableStateOf(uriList[0]) }
//    val firstUriList = uriList[0]
    //firstUriList를 remember로 변경하니깐 it이 오류가 나서 주석 처리함.
    val launcher = rememberLauncherForActivityResult(
        contract = ActivityResultContracts.PickVisualMedia(),
        onResult = { uri: Uri? ->
            uri?.let {
                firstUriList.value = uri
            }
        }
    )
    Card(
        shape = RoundedCornerShape(10.dp),
        modifier = Modifier
            .padding(5.dp)
            .size(170.dp)
            .clickable { onClick() },
    ) {
//        for (text in uriList) {
//            Text(text = text, fontSize = 10.sp)
//        }
        AsyncImage(
            model = firstUriList.value,
            contentDescription = "사진들",
            contentScale = ContentScale.Crop,
            error = painterResource(id = R.drawable.delete),
            filterQuality = FilterQuality.None

        )
        val bitmap = loadImageBitmap(context, firstUriList.toString())
        bitmap?.let {
            Image(
                bitmap = bitmap.asImageBitmap(),
                contentDescription = "사진들",
                contentScale = ContentScale.Crop
            )
        }
    }
//    Button(
//        onClick = onClick,
//        shape = RoundedCornerShape(10.dp),
//        modifier = Modifier
//            .padding(5.dp)
//            .size(170.dp),
//        contentPadding = PaddingValues(0.dp),
//    ) {
//        //Coil library
//        AsyncImage(
//            model = firstUriList,
//            contentDescription = "사진들",
//            contentScale = ContentScale.Crop,
//        )
//        firstUriList.value.let { uri ->
//            val bitmap = if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.P) {
//                ImageDecoder.decodeBitmap(
//                    ImageDecoder.createSource(
//                        context.contentResolver,
//                        uri
//                    )
//                )
//            } else {
//                MediaStore.Images.Media.getBitmap(context.contentResolver, uri)
//            }
//            GetBitmap(bitmap = bitmap)
//        }
//        launcher.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageOnly))
}


@Composable
fun MyRecordView(
    record: Record,
    context: Context, db: AppDatabase, scope: CoroutineScope, onBack: () -> Unit
) {
    Surface(
        modifier = Modifier
            .fillMaxSize(),
        color = Color.White
    ) {
        var clickEdit by remember { mutableStateOf(false) }
        val changeUri = record.photo.trim('[', ']').replace(" ", "")
        val uriStringList = changeUri.split(",")
        val uriList = uriStringList.map { Uri.parse(it) }
        var clickEditUid by remember { mutableStateOf(0) }
        var clickPhoto by remember { mutableStateOf(false) }
        var clickPhotoUri by remember { mutableStateOf<Uri?>(null) }
//        var screenSize by remember { mutableStateOf(IntSize(0, 0)) }

        Column {
            //상단
            Column(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(48.dp)
            ) {
                Row(
                    horizontalArrangement = Arrangement.SpaceBetween,
                    modifier = Modifier.fillMaxSize(),
                ) {
                    TopButton(
                        onClick = { onBack() },
                        icon = R.drawable.arrowback,
                        detail = "뒤로 가기",
                        color = Grey900,
                        modifier = Modifier.padding(top = 3.dp),
                        text = "이전",
                        fontWeight = FontWeight.Medium
                    )
                    Spacer(modifier = Modifier.width(150.dp))
                    IconButton(
                        onClick = {
                            val deleteInfo = record
                            if (deleteInfo != null) {
                                scope.launch(Dispatchers.IO) {
                                    db.recordDao().delete(deleteInfo)
                                }
                            }
                            onBack()
                        },
                        colors = IconButtonDefaults.iconButtonColors(Color.White),
                        modifier = Modifier
                            .height(48.dp)
                            .width(48.dp)
                            .padding(0.dp)
                    ) {
                        Icon(
                            painter = painterResource(id = R.drawable.delete),
                            contentDescription = "삭제 하기",
                            tint = Color(0xfff02323)
                        )
                    }
                    TopButton(
                        onClick = {
                            clickEditUid = record.uid
                            clickEdit = !clickEdit
                        },
                        icon = null,
                        detail = "",
                        color = Grey500,
                        modifier = Modifier,
                        text = "수정",
                        fontWeight = FontWeight.Bold
                    )
                }
            }
            Spacer(modifier = Modifier.height(10.dp))
            Column(
                modifier = Modifier
                    .padding(start = 20.dp, end = 20.dp)
                    .verticalScroll(
                        rememberScrollState()
                    )
            ) {
                Spacer(modifier = Modifier.height(13.dp))
                if (record.title != null) {
                    MyRecordText(text = record.title!!, color = Grey900, fontSize = 20)
                }
                MyRecordText(text = record.place, color = Grey500, fontSize = 14)
            }
            Row(
                modifier = Modifier
                    .padding(start = 20.dp)
                    .horizontalScroll(rememberScrollState())
            ) {
                if (!clickPhoto) {
                    for (recordImage in uriList) {
                        Card(
                            modifier = Modifier
                                .width(333.dp)
                                .height(310.dp)
                                .padding(6.dp)
                                .clickable {
                                    clickPhotoUri = recordImage
                                    clickPhoto = true
                                },
                            shape = RoundedCornerShape(10.dp)
                        ) {
//                            Text(text = "$recordImage")
                            AsyncImage(
                                model = recordImage,
                                contentDescription = "사진",
                                contentScale = ContentScale.Crop,
                            )
//                            val bitmap = loadImageBitmap(context, uriStringList)
//                            bitmap?.let {
//                                Image(
//                                    bitmap = bitmap.asImageBitmap(), contentDescription = "", contentScale = ContentScale.Fit
//
//                            }
                        }
                    }
                }
            }
            Column(
                modifier = Modifier.padding(start = 20.dp, end = 20.dp)
            ) {
                if (record.mainText != null) {
                    MyRecordText(text = record.mainText!!, color = Grey900, fontSize = 16)
                }
                if (record.tag != null) {
                    MyRecordText(text = record.tag!!, color = BlueGreen, fontSize = 14)
                }
                Spacer(modifier = Modifier.height(10.dp))
                MyRecordText(text = record.date, color = Grey500, fontSize = 14)
            }
        }
        if (clickEdit) {
            EditRecord(
                record = record,
                context = context,
                db = db,
                scope = scope,
                uriList = uriList
            ) {
                clickEdit = false
            }
        }
        if (clickPhoto) {
            Column(
                modifier = Modifier.fillMaxSize(),
                horizontalAlignment = Alignment.CenterHorizontally,
                verticalArrangement = Arrangement.Center
            ) {
                var scale by remember { mutableStateOf(1f) }
                var offset by remember { mutableStateOf(Offset.Zero) }
                val state = rememberTransformableState { zoomChange, offsetChange, rotationChange ->
                    scale *= zoomChange
                    if (scale * zoomChange < 1f) {
                        scale = 1f
                        offset = Offset(0f, 0f)
                    }
//                    val newOffset = offset + offsetChange
//                    if (offestBoundary(newOffset, screenSize, scale))
                    if (scale > 1f) {
                        offset += offsetChange * 2f
                    }
                }
                Card(
                    modifier = Modifier
                        .fillMaxSize()
                        .clickable { clickPhoto = false }
                ) {
                    Box(
                        modifier = Modifier
                            .fillMaxSize()
//                            .onGloballyPositioned { coordinates ->
//                                screenSize = coordinates.size
//                            }
                            .graphicsLayer(
                                scaleX = scale,
                                scaleY = scale,
                                translationX = offset.x,
                                translationY = offset.y
                            )
                            .transformable(state = state),
                        contentAlignment = Alignment.Center
                    ) {
//                Text(text = "$clickPhotoUri")
                        AsyncImage(
                            model = clickPhotoUri,
                            contentDescription = "사진",
                            contentScale = ContentScale.Fit,
                        )
                    }
                }
            }
        }
    }
}

@Composable
fun MyRecordText(text: String, color: Color, fontSize: Int) {
    Text(
        text = text,
        color = color,
        fontSize = fontSize.sp,
        fontWeight = FontWeight.Medium,
        modifier = Modifier
            .fillMaxWidth()
            .padding(top = 5.dp, bottom = 5.dp)
    )
}

fun offestBoundary(offset: Offset, screenSize: IntSize, scale: Float): Boolean {
    val scaledWidth = screenSize.width.toFloat() * scale
    val scaledHeight = screenSize.height.toFloat() * scale

    return offset.x >= -scaledWidth / 2 && offset.x <= scaledWidth / 2 && offset.y >= -scaledHeight / 2 && offset.y <= scaledHeight / 2
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun EditRecord(
    record: Record?,
    context: Context,
    db: AppDatabase,
    scope: CoroutineScope,
    uriList: List<Uri>?,
    onBack: () -> Unit
) {
    var editTitle by remember { mutableStateOf(record?.title ?: "") }
    var editPlace by remember { mutableStateOf(record?.place ?: "") }
    var editDate by remember { mutableStateOf(record?.date ?: "") }
    var editMainText by remember { mutableStateOf(record?.mainText ?: "") }
    var isTitleFocused by remember { mutableStateOf(true) }
    var isContentFocused by remember { mutableStateOf(true) }
    var editTag by remember { mutableStateOf(record?.tag ?: "") }
    //사진 다중 선택
    var selectUris by remember {
        mutableStateOf(uriList ?: emptyList())
    }
    //사진 불러오기 위한 런처
    val launcherM = rememberLauncherForActivityResult(
        contract = ActivityResultContracts.PickMultipleVisualMedia(),
        onResult = {
            selectUris = it
        }
    )

    Surface(
        modifier = Modifier
            .fillMaxSize(),
        color = Color.White
    ) {
        Column {
            //상단
            Column(
                modifier = Modifier
                    .fillMaxWidth()
                    .height(48.dp)
            ) {
                Row(
                    horizontalArrangement = Arrangement.SpaceBetween,
                    modifier = Modifier.fillMaxSize()
                ) {
                    TopButton(
                        onClick = { onBack() },
                        icon = R.drawable.arrowback,
                        detail = "뒤로 가기",
                        color = Grey900,
                        modifier = Modifier.padding(top = 3.dp),
                        text = "이전",
                        fontWeight = FontWeight.Medium
                    )
                    Text(
                        text = "추억 수정하기",
                        color = Grey900,
                        textAlign = TextAlign.Center,
                        fontSize = 16.sp,
                        fontWeight = FontWeight.Bold,
                        modifier = Modifier
                            .height(48.dp)
                            .width(150.dp)
                            .padding(top = 12.dp),
                    )
                    TopButton(
                        onClick = {
                            record?.title = editTitle
                            record?.date = editDate
                            record?.place = editPlace
                            record?.mainText = editMainText
                            record?.tag = editTag
                            record?.photo = selectUris.toString()

                            scope.launch(Dispatchers.IO) {
                                if (record != null) {
                                    db.recordDao().update(record)
                                }
                            }
                            onBack()
                        },
                        icon = R.drawable.done,
                        detail = "저장 하기",
                        color = BlueGreen,
                        modifier = Modifier,
                        text = "저장",
                        fontWeight = FontWeight.Bold
                    )
                }
            }
            //입력될 TextField만 스크롤 가능
            Column(
                horizontalAlignment = Alignment.CenterHorizontally,
            ) {
                LazyColumn(
                    modifier = Modifier.fillMaxSize()
                ) {
                    item {
                        Spacer(modifier = Modifier.height(10.dp))
                        TextField(
                            value = editTitle,
                            onValueChange = {
                                editTitle = it
                                isTitleFocused = false
                            },
                            label = {
                                if (isTitleFocused) {
                                    Text(
                                        text = "제목",
                                        color = Grey400,
                                        fontWeight = FontWeight.Medium,
                                        fontSize = 20.sp
                                    )
                                }
                            },
                            textStyle = TextStyle(
                                textAlign = TextAlign.Start,
                                fontWeight = FontWeight.Bold,
                                fontSize = 16.sp
                            ),
                            colors = TextFieldDefaults.textFieldColors(
                                textColor = BlueGreen,
                                containerColor = Color.White,
                                cursorColor = Color(0xff03b2b2),
                                disabledIndicatorColor = Color.White,
                                focusedIndicatorColor = Color.White,
                                unfocusedIndicatorColor = Color.White,
                            ),
                            modifier = Modifier
                                .height(60.dp)
                                .fillMaxWidth()
                                .padding(start = 20.dp, end = 20.dp),
                        )
                        Line()
                        DefaultTextField(
                            text = "장소",
                            value = editPlace,
                            onValuechange = { editPlace = it })
                        Line()
                        DefaultTextField(
                            text = "날짜",
                            value = editDate,
                            onValuechange = { editDate = it })
                        Line()
                        TextField(
                            value = editMainText,
                            onValueChange = {
                                editMainText = it
                                isContentFocused = false
                            },
                            label = {
                                if (isContentFocused) {
                                    Text(
                                        text = "내용을 입력하세요.",
                                        color = Grey400,
                                        fontWeight = FontWeight.Medium
                                    )
                                }
                            },
                            colors = TextFieldDefaults.textFieldColors(
                                textColor = Grey900,
                                containerColor = Color.White,
                                cursorColor = Color(0xff03b2b2),
                                disabledIndicatorColor = Color.White,
                                focusedIndicatorColor = Color.White,
                                unfocusedIndicatorColor = Color.White
                            ),
                            modifier = Modifier
                                .fillMaxWidth()
                                .height(385.dp)
                                .padding(start = 20.dp, end = 20.dp, top = 10.dp, bottom = 16.dp)
                        )
                        Line()
                        //해시태그 사용하면 색깔이 바뀌게 되는 것도 가능?
                        DefaultTextField(
                            text = "태그",
                            value = editTag,
                            onValuechange = { editTag = it })
                        Line()
                        //사진 선택 도구
                        Button(
                            onClick = {
                                launcherM.launch(PickVisualMediaRequest(ActivityResultContracts.PickVisualMedia.ImageAndVideo))
                            },
                            colors = ButtonDefaults.buttonColors(Grey100),
                            modifier = Modifier
                                .fillMaxWidth()
                                .height(70.dp)
                                .padding(start = 20.dp, end = 20.dp, top = 16.dp),
                            shape = RoundedCornerShape(10.dp)
                        ) {
                            Row(
                                horizontalArrangement = Arrangement.Center
                            ) {
                                Icon(
                                    painter = painterResource(id = R.drawable.addphoto),
                                    contentDescription = "사진 추가",
                                    tint = Grey900
                                )
                                Spacer(modifier = Modifier.width(5.dp))
                                Text(
                                    text = "사진 등록하기",
                                    color = Grey900,
                                    fontSize = 16.sp,
                                    fontWeight = FontWeight.Medium
                                )
                            }
                        }
                    }
                    //불러온 사진 위치
                    val rows = selectUris.chunked(3)
                    items(rows) { rowUris ->
                        Row(
                            modifier = Modifier
                                .fillMaxWidth()
                                .padding(start = 5.dp, end = 5.dp),
                        ) {
                            rowUris.forEach { uri ->
                                Card(
                                    shape = RoundedCornerShape(10.dp),
                                    modifier = Modifier
                                        .padding(3.dp)
                                        .size(120.dp),
                                ) {
                                    AsyncImage(
                                        model = uri,
                                        contentDescription = "사진들",
                                        contentScale = ContentScale.Crop
                                    )
                                }
                            }
                        }
                    }
                }
            }
        }
    }
}

@Composable
fun LoadingAnimation() {
    val animation = rememberInfiniteTransition()
    val progress by animation.animateFloat(
        initialValue = 0f,
        targetValue = 1f,
        animationSpec = infiniteRepeatable(
            animation = tween(1000),
            repeatMode = RepeatMode.Restart,
        )
    )

    Box(
        modifier = Modifier
            .size(60.dp)
            .scale(progress)
            .alpha(1f - progress)
            .border(
                5.dp,
                color = Color.Black,
                shape = CircleShape
            )
    )
}

fun loadImageBitmap(context: Context, imageUri: String): Bitmap? {
    return try {
        val inputStream = context.contentResolver.openInputStream(Uri.parse(imageUri))
        return BitmapFactory.decodeStream(inputStream)
    } catch (e: Exception) {
        e.printStackTrace()
        null
    }
}
```
