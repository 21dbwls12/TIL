gradle app dependencies에 추가
```kotlin
implementation("androidx.room:room-ktx:$room_version")
```

------------------

data class User
```kotlin
@Entity
data class User(
    @PrimaryKey(autoGenerate = true) val uid: Int = 0,
    @ColumnInfo("name") var name: String? = null,
    @ColumnInfo("phone") var phone: String? = null,
    @ColumnInfo("email") var email: String? = null,
    @ColumnInfo("age") val age: Int? = null,
)
````

---------------

interface UserDao
```kotlin
@Dao
interface UserDao {
    @Query("SELECT * FROM user")
    fun getAll(): Flow<List<User>>

    @Query("SELECT * FROM user WHERE uid IN (:userIds)")
    fun loadAllByIds(userIds: IntArray): List<User>

//    @Query("SELECT * FROM user WHERE first_name LIKE :first AND " +
//            "last_name LIKE :last LIMIT 1")
//    fun findByName(first: String, last: String): User

    @Insert
    fun insertAll(vararg users: User)

    @Delete
    fun delete(user: User)

    @Update
    suspend fun update(user: User)
}
```

--------------------

class AppDatabase
```kotlin
@Database(entities = [User::class], version = 1)
abstract class AppDatabase : RoomDatabase() {
    abstract fun userDao(): UserDao

    companion object {
        @Volatile
        private var INSTANCE: AppDatabase? = null

        fun getDatabase(context: Context): AppDatabase {
            return INSTANCE ?: synchronized(this) {
                val db = Room.databaseBuilder(
                    context,
                    AppDatabase::class.java, "contacts_db"
                ).build()
                db
            }
        }
    }
}
```

----------------
```kotlin
//MainActivity
class MainActivity : ComponentActivity() {
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            RoomGetDataTheme {
                // A surface container using the 'background' color from the theme
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {
                    Room2()
                }
            }
        }
    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun Room2() {
    var name by remember { mutableStateOf("") }
    var phone by remember { mutableStateOf("") }
    var email by remember { mutableStateOf("") }
    var clickButton by remember { mutableStateOf(false) }
    var clickDelete by remember { mutableStateOf(false) }
    var printName by remember { mutableStateOf("") }
    var printPhone by remember { mutableStateOf("") }
    var printEmail by remember { mutableStateOf("") }

    Column(
        horizontalAlignment = Alignment.CenterHorizontally,
        modifier = Modifier.verticalScroll(rememberScrollState())
    ) {
        val context = LocalContext.current
        val db = remember {
            AppDatabase.getDatabase(context)
        }
        val userList by db.userDao().getAll().collectAsState(initial = emptyList())
        val scope = rememberCoroutineScope()

        Spacer(modifier = Modifier.height(90.dp))
        AllTextField(userInfo = name, onValueUser = { name = it }, labelText = "이름")
        Spacer(modifier = Modifier.height(12.dp))
        AllTextField(userInfo = phone, onValueUser = { phone = it }, labelText = "전화번호")
        Spacer(modifier = Modifier.height(12.dp))
        AllTextField(userInfo = email, onValueUser = { email = it }, labelText = "이메일")
        Spacer(modifier = Modifier.height(12.dp))
        Button(onClick = {
            if (name.isNotBlank()) {
                clickButton = !clickButton
                printName = name
                printPhone = phone
                printEmail = email
                val newUser = User(name = name, phone = phone, email = email)
                scope.launch(Dispatchers.IO) {
                    db.userDao().insertAll(newUser)
                }
            }
        }) {
            Text(text = "입력")
        }
        Button(onClick = {
            clickDelete = true
            val deleteUser = userList.find { it.name == "dsfe" }
//            deleteUser?.let{
//                scope.launch(Dispatchers.IO) {
//                    db.userDao().delete(it)
//                }
//            }
            if (deleteUser != null) {
                scope.launch(Dispatchers.IO) {
                    db.userDao().delete(deleteUser)
                }
            }
        }

        ) {
            Text(text = "삭제")
        }
        Spacer(modifier = Modifier.height(50.dp))
        Surface(
            modifier = Modifier
                .width(340.dp)
                .height(200.dp),
            color = Color.LightGray
        ) {
            Column(
                modifier = Modifier.padding(20.dp)
            ) {
                if (printName.isNotBlank()) {
                    InputData(inputDataText = "이름: $printName")
                }
                if (printPhone.isNotBlank()) {
                    InputData(inputDataText = "전화번호: $printPhone")
                }
                if (printEmail.isNotBlank()) {
                    InputData(inputDataText = "이메일: $printEmail")
                }
            }

        }
        Button(
            onClick = {
                val intent = Intent(context, UserInfoActivity::class.java)
                context.startActivity(intent)
            }
        ) {
            Text(text = "사용자 정보")
        }
//        Column {
//            Text(text = "사용자 정보: 이름 | 전화번호 | 이메일")
//            for (user in userList) {
//                UserItem(user = user)
//            }
//        }

    }
}

@OptIn(ExperimentalMaterial3Api::class)
@Composable
fun AllTextField(userInfo: String, onValueUser: (String) -> Unit, labelText: String) {
    var userInfo = userInfo
    TextField(
        value = userInfo,
        onValueChange = onValueUser,
        label = { Text(text = labelText) },
        modifier = Modifier.width(340.dp)
    )
}

@Composable
fun InputData(inputDataText: String) {
    Text(
        text = inputDataText,
        modifier = Modifier.fillMaxWidth(),
        textAlign = TextAlign.Start,
        fontSize = 18.sp,
        color = Color.Black
    )
}

//@Composable
//fun UserItem(user: User) {
//    Row {
//        Text(text = "User : ${user.name} | ${user.phone} | ${user.email}")
//    }
//}

@Composable
fun Greeting(name: String, modifier: Modifier = Modifier) {
    Text(
        text = "Hello $name!",
        modifier = modifier
    )
}

@Preview(showBackground = true)
@Composable
fun GreetingPreview() {
    RoomGetDataTheme {
        Surface(
            modifier = Modifier.fillMaxSize()
        ) {
            Room2()
        }
    }
}
```

```kotlin
//UserInfoActivity
class UserInfoActivity : ComponentActivity() {
    @OptIn(ExperimentalMaterial3Api::class)
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            RoomGetDataTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {
                    val context = LocalContext.current
                    val db = remember {
                        AppDatabase.getDatabase(context)
                    }
                    val userList by db.userDao().getAll().collectAsState(initial = emptyList())
                    val scope = rememberCoroutineScope()
                    var searchText by remember { mutableStateOf("") }
                    var clickSearch by remember { mutableStateOf(false) }
                    val searchList = mutableListOf<User?>()

                    Column(
                        modifier = Modifier
                            .verticalScroll(rememberScrollState())
                            .padding(15.dp)
                    ) {
                        Column {
                            Row {
                                TextField(
                                    value = searchText,
                                    onValueChange = { searchText = it },
                                    label = {
                                        Text(
                                            text = "검색"
                                        )
                                    },
                                    modifier = Modifier.width(230.dp)
                                )
                                Button(
                                    onClick = {
                                        searchText = ""
                                        clickSearch = false
                                    },
                                    colors = ButtonDefaults.buttonColors(Color.Transparent),
                                    modifier = Modifier
                                        .width(50.dp)
                                        .height(50.dp),
                                    shape = RoundedCornerShape(15.dp),
                                    contentPadding = PaddingValues(0.dp)
                                ) {
                                    Text(text = "X", color = Color.Red)
                                }
                                Button(
                                    onClick = {
                                        clickSearch = !clickSearch

                                        val searchName = userList.find { it.name == searchText }
                                        val searchPhone = userList.find { it.phone == searchText }
                                        val searchEmail = userList.find { it.email == searchText }

                                        if (searchName != null || searchPhone != null || searchEmail != null) {

                                            searchList.clear()
                                            searchList.addAll(
                                                listOf(
                                                    searchName,
                                                    searchPhone,
                                                    searchEmail
                                                )
                                            )

                                        }
                                    }
                                ) {
                                    Text(text = "검색")
                                }
                            }
                            Column {
                                if (clickSearch) {
                                    for (user in searchList)
                                        UserItem(
                                            user = user,
                                            scope = scope,
                                            db = db,
                                            context = context
                                        )
                                    Divider(thickness = 1.dp, color = Color.Green)
                                }
                                if (!clickSearch) {
                                    for (user in userList) {
                                        UserItem(
                                            user = user,
                                            scope = scope,
                                            db = db,
                                            context = context
                                        )
                                        Divider(thickness = 1.dp, color = Color.Green)
                                    }
                                }
                            }
                        }
                        Button(
                            onClick = {
                                intent = Intent(this@UserInfoActivity, MainActivity::class.java)
                                context.startActivity(intent)
                            }
                        ) {
                            Text(text = "이전")
                        }
                        Button(onClick = {
                            val deleteUser =
                                userList.find { it.name == searchText || it.phone == searchText || it.email == searchText }
//                            deleteUser?.let {
//                                scope.launch(Dispatchers.IO) {
//                                    db.userDao().delete(it)
//                                }
//                            }
                            if (deleteUser != null) {
                                scope.launch(Dispatchers.IO) {
                                    db.userDao().delete(deleteUser)
                                }
                            }
                        }

                        ) {
                            Text(text = "삭제")
                        }
                    }
                }
            }
        }
    }
}

@Composable
fun UserItem(user: User?, scope: CoroutineScope, db: AppDatabase, context: Context) {
    var clickEdit by remember { mutableStateOf(false) }

    Row(
        verticalAlignment = Alignment.CenterVertically,
        modifier = Modifier
            .fillMaxWidth()
            .height(80.dp)
    ) {
        Surface(
            modifier = Modifier
                .size(45.dp),
            shape = CircleShape,
            color = Color.LightGray
        ) {
            Text(
                text = "${user?.name}",
                fontSize = 35.sp,
                fontWeight = FontWeight.SemiBold,
                color = Color.White,
                maxLines = 1,
                overflow = TextOverflow.Clip,
                modifier = Modifier.padding(start = 15.dp)
            )
        }
        Spacer(modifier = Modifier.width(10.dp))
        Column {
            Text(
                text = "${user?.name}",
                modifier = Modifier.width(150.dp),
                textAlign = TextAlign.Start,
                fontSize = 20.sp
            )
            Text(
                text = "${user?.phone}",
                modifier = Modifier.width(150.dp),
                textAlign = TextAlign.Start,
                fontSize = 20.sp
            )
            Text(
                text = "${user?.email}",
                modifier = Modifier.width(150.dp),
                textAlign = TextAlign.Start,
                fontSize = 20.sp
            )
        }
        Button(
            onClick = {
                clickEdit = !clickEdit

                val intent = Intent(context, EditActivity::class.java)
                intent.putExtra("currentUid", user?.uid)
                context.startActivity(intent)
            }
        ) {
            Text(text = "수정")
        }

        Button(
            onClick = {
                val deleteThisInfo = user

                if (deleteThisInfo != null) {
                    scope.launch(Dispatchers.IO) {
                        db.userDao().delete(deleteThisInfo)
                    }
                }
            }
        ) {
            Text(text = "삭제")
        }
    }
}
```

```kotlin
//EditActivity
class EditActivity : ComponentActivity() {
    @OptIn(ExperimentalMaterial3Api::class)
    override fun onCreate(savedInstanceState: Bundle?) {
        super.onCreate(savedInstanceState)
        setContent {
            RoomGetDataTheme {
                Surface(
                    modifier = Modifier.fillMaxSize(),
                    color = MaterialTheme.colorScheme.background
                ) {
                    val currentUid = intent.getIntExtra("currenntUid", 0)

                    UpdateUser(currentUid)
                }
            }
        }
    }
}

@Composable
fun UpdateUser(uid: Int) {
    val context = LocalContext.current
    val db = remember {
        AppDatabase.getDatabase(context)
    }
    val userList by db.userDao().getAll().collectAsState(initial = emptyList())
    val scope = rememberCoroutineScope()
    var editName by remember { mutableStateOf("") }
    var editPhone by remember { mutableStateOf("") }
    var editEmail by remember { mutableStateOf("") }

    Column(
        modifier = Modifier.fillMaxSize(),
        verticalArrangement = Arrangement.Center,
        horizontalAlignment = Alignment.CenterHorizontally
    ) {
        AllTextField(userInfo = editName, onValueUser = { editName = it }, labelText = "수정할 이름")
        Spacer(modifier = Modifier.height(12.dp))
        AllTextField(
            userInfo = editPhone,
            onValueUser = { editPhone = it },
            labelText = "수정할 전화번호"
        )
        Spacer(modifier = Modifier.height(12.dp))
        AllTextField(
            userInfo = editEmail,
            onValueUser = { editEmail = it },
            labelText = "수정할 이메일"
        )
        Spacer(modifier = Modifier.height(12.dp))
        Row {
            Button(onClick = {
                val intent = Intent(context, UserInfoActivity::class.java)
                context.startActivity(intent)
            }
            ) {
                Text(text = "취소")
            }
            Button(
                onClick = {
                    val editThisUser = uid
                    val editUser = userList.find { it.uid == editThisUser }

                    if (editName.isNotEmpty() && editUser != null) {
                        val updateUser =
                            editUser.copy(name = editName, phone = editPhone, email = editEmail)
                        scope.launch(Dispatchers.IO) {
                            db.userDao().update(updateUser)
                        }
                        val intent = Intent(context, UserInfoActivity::class.java)
                        context.startActivity(intent)
                    }
                }
            ) {
                Text(text = "수정")
            }
        }
    }
}
```
